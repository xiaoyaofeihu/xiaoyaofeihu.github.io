---
title: å¦‚ä½•ç¡®ä¿å‡½æ•°ä¸èƒ½ä¿®æ”¹é›†åˆ
date: 2024-10-16 13:33:41
tags:
	- é›†åˆ
categories: é¢è¯•
---
# ğŸ‘Œå¦‚ä½•ç¡®ä¿å‡½æ•°ä¸èƒ½ä¿®æ”¹é›†åˆï¼Ÿ

# é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ
## ä½¿ç”¨Collections.unmodifiableCollectionæ–¹æ³•
Javaæä¾›äº†Collections.unmodifiableCollectionæ–¹æ³•ï¼Œå¯ä»¥å°†ä¸€ä¸ªé›†åˆåŒ…è£…æˆä¸€ä¸ªä¸å¯ä¿®æ”¹çš„è§†å›¾ã€‚å¯¹è¿™ä¸ªè§†å›¾çš„ä¿®æ”¹æ“ä½œå°†ä¼šæŠ›å‡ºUnsupportedOperationExceptionã€‚

```plain
import java.util.*;

public class UnmodifiableCollectionExample {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>(Arrays.asList("A", "B", "C"));
        Collection<String> unmodifiableList = Collections.unmodifiableCollection(list);

        // ä¼ é€’ä¸å¯ä¿®æ”¹çš„é›†åˆç»™å‡½æ•°
        printCollection(unmodifiableList);

        // å°è¯•ä¿®æ”¹é›†åˆå°†æŠ›å‡º UnsupportedOperationException
        // unmodifiableList.add("D"); // è¿™è¡Œä»£ç ä¼šæŠ›å‡ºå¼‚å¸¸
    }

    public static void printCollection(Collection<String> collection) {
        for (String item : collection) {
            System.out.println(item);
        }
    }
}
```

## ä½¿ç”¨Collections.unmodifiable
å¯¹äºç‰¹å®šç±»å‹çš„é›†åˆï¼Œå¦‚Listã€Setå’ŒMapï¼ŒJava æä¾›äº†ç›¸åº”çš„ä¸å¯ä¿®æ”¹è§†å›¾æ–¹æ³•ï¼š

Collections.unmodifiableList

Collections.unmodifiableSet

Collections.unmodifiableMap

```plain
import java.util.*;

public class UnmodifiableSpecificCollectionsExample {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>(Arrays.asList("A", "B", "C"));
        List<String> unmodifiableList = Collections.unmodifiableList(list);

        Set<String> set = new HashSet<>(Arrays.asList("X", "Y", "Z"));
        Set<String> unmodifiableSet = Collections.unmodifiableSet(set);

        Map<String, Integer> map = new HashMap<>();
        map.put("One", 1);
        map.put("Two", 2);
        Map<String, Integer> unmodifiableMap = Collections.unmodifiableMap(map);

        // ä¼ é€’ä¸å¯ä¿®æ”¹çš„é›†åˆç»™å‡½æ•°
        printList(unmodifiableList);
        printSet(unmodifiableSet);
        printMap(unmodifiableMap);

        // å°è¯•ä¿®æ”¹é›†åˆå°†æŠ›å‡º UnsupportedOperationException
        // unmodifiableList.add("D"); // è¿™è¡Œä»£ç ä¼šæŠ›å‡ºå¼‚å¸¸
        // unmodifiableSet.add("W"); // è¿™è¡Œä»£ç ä¼šæŠ›å‡ºå¼‚å¸¸
        // unmodifiableMap.put("Three", 3); // è¿™è¡Œä»£ç ä¼šæŠ›å‡ºå¼‚å¸¸
    }

    public static void printList(List<String> list) {
        for (String item : list) {
            System.out.println(item);
        }
    }

    public static void printSet(Set<String> set) {
        for (String item : set) {
            System.out.println(item);
        }
    }

    public static void printMap(Map<String, Integer> map) {
        for (Map.Entry<String, Integer> entry : map.entrySet()) {
            System.out.println(entry.getKey() + ": " + entry.getValue());
        }
    }
}
```

## ä½¿ç”¨Collections.unmodifiableCollectioné€’å½’åŒ…è£…åµŒå¥—é›†åˆ
å¦‚æœé›†åˆä¸­åŒ…å«åµŒå¥—é›†åˆï¼ˆä¾‹å¦‚ä¸€ä¸ªListä¸­åŒ…å«Setï¼‰ï¼Œä½ éœ€è¦é€’å½’åœ°å°†æ‰€æœ‰åµŒå¥—é›†åˆä¹ŸåŒ…è£…æˆä¸å¯ä¿®æ”¹çš„è§†å›¾ã€‚

```plain
import java.util.*;

public class UnmodifiableNestedCollectionsExample {
    public static void main(String[] args) {
        List<Set<String>> listOfSets = new ArrayList<>();
        listOfSets.add(new HashSet<>(Arrays.asList("A", "B", "C")));
        listOfSets.add(new HashSet<>(Arrays.asList("X", "Y", "Z")));

        List<Set<String>> unmodifiableListOfSets = new ArrayList<>();
        for (Set<String> set : listOfSets) {
            unmodifiableListOfSets.add(Collections.unmodifiableSet(set));
        }
        Collection<List<Set<String>>> unmodifiableCollection = Collections.unmodifiableCollection(Collections.singletonList(unmodifiableListOfSets));

        // ä¼ é€’ä¸å¯ä¿®æ”¹çš„é›†åˆç»™å‡½æ•°
        printNestedCollection(unmodifiableCollection);

        // å°è¯•ä¿®æ”¹é›†åˆå°†æŠ›å‡º UnsupportedOperationException
        // unmodifiableListOfSets.get(0).add("D"); // è¿™è¡Œä»£ç ä¼šæŠ›å‡ºå¼‚å¸¸
    }

    public static void printNestedCollection(Collection<List<Set<String>>> collection) {
        for (List<Set<String>> list : collection) {
            for (Set<String> set : list) {
                for (String item : set) {
                    System.out.println(item);
                }
            }
        }
    }
}
```

é€šè¿‡ä»¥ä¸Šå¯ä»¥ç¡®ä¿ä¼ é€’ç»™å‡½æ•°çš„é›†åˆä¸ä¼šè¢«ä¿®æ”¹ï¼Œä»è€Œä¿è¯é›†åˆçš„ä¸å¯å˜æ€§ã€‚

