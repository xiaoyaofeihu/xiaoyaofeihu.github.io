<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="ä½™å£°-ä¸ªäººåšå®¢">
<meta property="og:url" content="https://xiaoyaofeihu.github.io/page/9/index.html">
<meta property="og:site_name" content="ä½™å£°-ä¸ªäººåšå®¢">
<meta property="og:locale">
<meta property="article:author" content="javayun">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'ä½™å£°'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://xiaoyaofeihu.github.io/page/9/"/>





  <title>ä½™å£°-ä¸ªäººåšå®¢</title>
  














<meta name="generator" content="Hexo 6.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ä½™å£°-ä¸ªäººåšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/ConcurrentHashMap%E7%9A%84%E5%8E%9F%E7%90%86%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/ConcurrentHashMap%E7%9A%84%E5%8E%9F%E7%90%86%EF%BC%9F/" itemprop="url">ConcurrentHashMapçš„åŸç†</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘ŒConcurrentHashMapçš„åŸç†ï¼Ÿ"><a href="#ğŸ‘ŒConcurrentHashMapçš„åŸç†ï¼Ÿ" class="headerlink" title="ğŸ‘ŒConcurrentHashMapçš„åŸç†ï¼Ÿ"></a>ğŸ‘ŒConcurrentHashMapçš„åŸç†ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>ConcurrentHashMap æ˜¯ Java ä¸­ä¸€ç§é«˜æ•ˆçš„çº¿ç¨‹å®‰å…¨å“ˆå¸Œè¡¨ï¼Œä¸»è¦ç”¨äºåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¿›è¡Œé«˜å¹¶å‘çš„è¯»å†™æ“ä½œã€‚å®ƒçš„è®¾è®¡å’Œå®ç°ä½¿å¾—åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹èƒ½å¤Ÿæä¾›æ¯”å…¶ä»–åŒæ­¥å“ˆå¸Œè¡¨ï¼ˆå¦‚ HashMapï¼‰æ›´é«˜çš„å¹¶å‘æ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯ ConcurrentHashMap çš„ä¸»è¦åŸç†å’Œæœºåˆ¶</p>
<h2 id="åˆ†æ®µé”æœºåˆ¶"><a href="#åˆ†æ®µé”æœºåˆ¶" class="headerlink" title="åˆ†æ®µé”æœºåˆ¶"></a>åˆ†æ®µé”æœºåˆ¶</h2><p>åœ¨æ—©æœŸç‰ˆæœ¬ï¼ˆJava 7åŠä¹‹å‰ï¼‰ï¼ŒConcurrentHashMap ä½¿ç”¨äº†åˆ†æ®µé”æœºåˆ¶ï¼ˆSegmented Lockingï¼‰æ¥å®ç°é«˜å¹¶å‘æ€§ã€‚</p>
<p><strong>åˆ†æ®µé”</strong>ï¼šConcurrentHashMap å°†æ•´ä¸ªå“ˆå¸Œè¡¨åˆ†æˆå¤šä¸ªæ®µï¼ˆSegmentï¼‰ï¼Œæ¯ä¸ªæ®µç»´æŠ¤ä¸€ä¸ªç‹¬ç«‹çš„å“ˆå¸Œè¡¨å’Œé”ã€‚è¿™æ ·ï¼Œåœ¨ä¸åŒæ®µä¸Šçš„æ“ä½œå¯ä»¥å¹¶å‘è¿›è¡Œï¼Œä»è€Œæé«˜å¹¶å‘åº¦ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// ä¼ªä»£ç ç¤ºä¾‹</span><br><span class="line">class ConcurrentHashMap&lt;K, V&gt; &#123;</span><br><span class="line">    Segment&lt;K, V&gt;[] segments;</span><br><span class="line">    </span><br><span class="line">    static class Segment&lt;K, V&gt; &#123;</span><br><span class="line">        final ReentrantLock lock = new ReentrantLock();</span><br><span class="line">        HashEntry&lt;K, V&gt;[] table;</span><br><span class="line">        // å…¶ä»–å­—æ®µå’Œæ–¹æ³•</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é”ç²’åº¦</strong>ï¼šç”±äºæ¯ä¸ªæ®µéƒ½æœ‰è‡ªå·±çš„é”ï¼Œåªæœ‰åœ¨æ“ä½œåŒä¸€ä¸ªæ®µæ—¶æ‰éœ€è¦ç«äº‰é”ï¼Œè¿™å¤§å¤§é™ä½äº†é”ç«äº‰çš„å‡ ç‡ï¼Œæé«˜äº†å¹¶å‘æ€§èƒ½ã€‚</p>
<h2 id="CAS-æ“ä½œå’Œæ— é”æœºåˆ¶"><a href="#CAS-æ“ä½œå’Œæ— é”æœºåˆ¶" class="headerlink" title="CAS æ“ä½œå’Œæ— é”æœºåˆ¶"></a>CAS æ“ä½œå’Œæ— é”æœºåˆ¶</h2><p>åœ¨ Java 8 åŠä¹‹åï¼ŒConcurrentHashMap è¿›è¡Œäº†é‡æ„ï¼Œæ‘’å¼ƒäº†åˆ†æ®µé”æœºåˆ¶ï¼Œè½¬è€Œé‡‡ç”¨äº†æ›´åŠ ç»†ç²’åº¦çš„é”å’Œæ— é”æœºåˆ¶ï¼ˆCAS æ“ä½œï¼‰ã€‚</p>
<p><strong>CAS æ“ä½œ</strong>ï¼šCASï¼ˆCompare-And-Swapï¼‰æ˜¯ä¸€ç§æ— é”çš„åŸå­æ“ä½œï¼Œç”¨äºåœ¨ä¸åŠ é”çš„æƒ…å†µä¸‹å®ç°çº¿ç¨‹å®‰å…¨ã€‚<code>ConcurrentHashMap</code>ä½¿ç”¨<code>Unsafe</code>ç±»ä¸­çš„ CAS æ–¹æ³•æ¥æ›´æ–°æŸäº›å­—æ®µï¼Œä»è€Œé¿å…äº†é”çš„å¼€é”€ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// ä¼ªä»£ç ç¤ºä¾‹</span><br><span class="line">boolean casTabAt(Node&lt;K, V&gt;[] tab, int i, Node&lt;K, V&gt; c, Node&lt;K, V&gt; v) &#123;</span><br><span class="line">    return U.compareAndSwapObject(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, c, v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç»†ç²’åº¦é”</strong>ï¼šåœ¨ Java 8 ä¸­ï¼Œ<code>ConcurrentHashMap</code>ä½¿ç”¨äº†æ›´åŠ ç»†ç²’åº¦çš„é”ï¼ˆ<code>synchronized</code>å’Œ<code>ReentrantLock</code>ï¼‰ï¼Œåªåœ¨å¿…è¦æ—¶é”å®šç‰¹å®šçš„æ¡¶ï¼ˆbinï¼‰æˆ–èŠ‚ç‚¹ï¼Œä»è€Œè¿›ä¸€æ­¥æé«˜å¹¶å‘æ€§èƒ½ã€‚</p>
<h2 id="çº¢é»‘æ ‘"><a href="#çº¢é»‘æ ‘" class="headerlink" title="çº¢é»‘æ ‘"></a>çº¢é»‘æ ‘</h2><p>ä¸ºäº†åº”å¯¹å“ˆå¸Œå†²çªï¼ŒConcurrentHashMap åœ¨é“¾è¡¨é•¿åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼ˆé»˜è®¤æ˜¯8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œä»¥æé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚</p>
<p><strong>é“¾è¡¨</strong>ï¼šåœ¨å“ˆå¸Œå†²çªè¾ƒå°‘æ—¶ï¼Œä½¿ç”¨é“¾è¡¨å­˜å‚¨å†²çªçš„é”®å€¼å¯¹ã€‚</p>
<p><strong>çº¢é»‘æ ‘</strong>ï¼šå½“é“¾è¡¨é•¿åº¦è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œè½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œä»¥ä¾¿åœ¨å¤§é‡å†²çªæ—¶ä»èƒ½ä¿æŒè¾ƒé«˜çš„æŸ¥æ‰¾æ•ˆç‡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// ä¼ªä»£ç ç¤ºä¾‹</span><br><span class="line">if (binCount &gt;= TREEIFY_THRESHOLD) &#123;</span><br><span class="line">    treeifyBin(tab, hash);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ‰©å®¹æœºåˆ¶ï¼ˆRehashingï¼‰"><a href="#æ‰©å®¹æœºåˆ¶ï¼ˆRehashingï¼‰" class="headerlink" title="æ‰©å®¹æœºåˆ¶ï¼ˆRehashingï¼‰"></a>æ‰©å®¹æœºåˆ¶ï¼ˆRehashingï¼‰</h2><p>ConcurrentHashMap é‡‡ç”¨äº†æ¸è¿›å¼æ‰©å®¹æœºåˆ¶æ¥é¿å…æ‰©å®¹è¿‡ç¨‹ä¸­é•¿æ—¶é—´çš„å…¨è¡¨é”å®šã€‚</p>
<p><strong>æ¸è¿›å¼æ‰©å®¹</strong>ï¼šåœ¨æ‰©å®¹è¿‡ç¨‹ä¸­ï¼Œ<code>ConcurrentHashMap</code>å¹¶ä¸ä¼šä¸€æ¬¡æ€§å°†æ‰€æœ‰æ•°æ®è¿ç§»åˆ°æ–°çš„å“ˆå¸Œè¡¨ä¸­ï¼Œè€Œæ˜¯é‡‡ç”¨æ¸è¿›å¼æ‰©å®¹çš„æ–¹å¼ï¼Œåœ¨æ¯æ¬¡æ’å…¥æˆ–åˆ é™¤æ“ä½œæ—¶ï¼Œé€æ­¥è¿ç§»éƒ¨åˆ†æ•°æ®ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// ä¼ªä»£ç ç¤ºä¾‹</span><br><span class="line">void transfer(Node&lt;K, V&gt;[] tab, Node&lt;K, V&gt;[] nextTab) &#123;</span><br><span class="line">    // æ¸è¿›å¼è¿ç§»æ•°æ®</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è¯»å†™æ“ä½œ"><a href="#è¯»å†™æ“ä½œ" class="headerlink" title="è¯»å†™æ“ä½œ"></a>è¯»å†™æ“ä½œ</h2><p><strong>è¯»å–æ“ä½œ</strong>ï¼šè¯»å–æ“ä½œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯æ— é”çš„ï¼Œå› ä¸º<code>ConcurrentHashMap</code>ä½¿ç”¨äº†<code>volatile</code>å˜é‡å’Œ CAS æ“ä½œæ¥ä¿è¯è¯»å–çš„å¯è§æ€§å’Œä¸€è‡´æ€§ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// ä¼ªä»£ç ç¤ºä¾‹</span><br><span class="line">V get(Object key) &#123;</span><br><span class="line">    Node&lt;K, V&gt;[] tab; Node&lt;K, V&gt; e, p; int n, eh; K ek;</span><br><span class="line">    int h = spread(key.hashCode());</span><br><span class="line">    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;</span><br><span class="line">        (e = tabAt(tab, (n - 1) &amp; h)) != null) &#123;</span><br><span class="line">        if ((eh = e.hash) == h) &#123;</span><br><span class="line">            if ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))</span><br><span class="line">                return e.val;</span><br><span class="line">        &#125;</span><br><span class="line">        // å…¶ä»–è¯»å–é€»è¾‘</span><br><span class="line">    &#125;</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å†™å…¥æ“ä½œ</strong>ï¼šå†™å…¥æ“ä½œåˆ™éœ€è¦åœ¨å¿…è¦æ—¶ä½¿ç”¨é”æˆ– CAS æ“ä½œæ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">// ä¼ªä»£ç ç¤ºä¾‹</span><br><span class="line">V put(K key, V value) &#123;</span><br><span class="line">    return putVal(key, value, false);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">final V putVal(K key, V value, boolean onlyIfAbsent) &#123;</span><br><span class="line">    if (key == null || value == null) throw new NullPointerException();</span><br><span class="line">    int hash = spread(key.hashCode());</span><br><span class="line">    int binCount = 0;</span><br><span class="line">    for (Node&lt;K, V&gt;[] tab = table;;) &#123;</span><br><span class="line">        Node&lt;K, V&gt; f; int n, i, fh;</span><br><span class="line">        if (tab == null || (n = tab.length) == 0)</span><br><span class="line">            tab = initTable();</span><br><span class="line">        else if ((f = tabAt(tab, i = (n - 1) &amp; hash)) == null) &#123;</span><br><span class="line">            if (casTabAt(tab, i, null, new Node&lt;K, V&gt;(hash, key, value, null)))</span><br><span class="line">                break;                   // no lock when adding to empty bin</span><br><span class="line">        &#125;</span><br><span class="line">        else if ((fh = f.hash) == MOVED)</span><br><span class="line">            tab = helpTransfer(tab, f);</span><br><span class="line">        else &#123;</span><br><span class="line">            V oldVal = null;</span><br><span class="line">            synchronized (f) &#123;</span><br><span class="line">                if (tabAt(tab, i) == f) &#123;</span><br><span class="line">                    if (fh &gt;= 0) &#123;</span><br><span class="line">                        binCount = 1;</span><br><span class="line">                        for (Node&lt;K, V&gt; e = f;; ++binCount) &#123;</span><br><span class="line">                            K ek;</span><br><span class="line">                            if (e.hash == hash &amp;&amp;</span><br><span class="line">                                ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))) &#123;</span><br><span class="line">                                oldVal = e.val;</span><br><span class="line">                                if (!onlyIfAbsent)</span><br><span class="line">                                    e.val = value;</span><br><span class="line">                                break;</span><br><span class="line">                            &#125;</span><br><span class="line">                            Node&lt;K, V&gt; pred = e;</span><br><span class="line">                            if ((e = e.next) == null) &#123;</span><br><span class="line">                                pred.next = new Node&lt;K, V&gt;(hash, key, value, null);</span><br><span class="line">                                break;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    else if (f instanceof TreeBin) &#123;</span><br><span class="line">                        Node&lt;K, V&gt; p;</span><br><span class="line">                        binCount = 2;</span><br><span class="line">                        if ((p = ((TreeBin&lt;K, V&gt;)f).putTreeVal(hash, key, value)) != null) &#123;</span><br><span class="line">                            oldVal = p.val;</span><br><span class="line">                            if (!onlyIfAbsent)</span><br><span class="line">                                p.val = value;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (binCount != 0) &#123;</span><br><span class="line">                if (binCount &gt;= TREEIFY_THRESHOLD)</span><br><span class="line">                    treeifyBin(tab, i);</span><br><span class="line">                if (oldVal != null)</span><br><span class="line">                    return oldVal;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    addCount(1L, binCount);</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<blockquote>
<p>&#x2F;gr29od28mo8ulrk5&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/ConcurrentHashMap%E8%83%BD%E4%BF%9D%E8%AF%81%E5%A4%8D%E5%90%88%E6%93%8D%E4%BD%9C%E7%9A%84%E5%8E%9F%E5%AD%90%E6%80%A7%E5%90%97_/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/ConcurrentHashMap%E8%83%BD%E4%BF%9D%E8%AF%81%E5%A4%8D%E5%90%88%E6%93%8D%E4%BD%9C%E7%9A%84%E5%8E%9F%E5%AD%90%E6%80%A7%E5%90%97_/" itemprop="url">ConcurrentHashMap èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§å—</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ConcurrentHashMap-èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§å—"><a href="#ConcurrentHashMap-èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§å—" class="headerlink" title="ConcurrentHashMap èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§å—?"></a>ConcurrentHashMap èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§å—?</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>ä¸èƒ½ï¼ŒConcurrentHashMap æ˜¯ Java ä¸­ç”¨äºå¤„ç†å¹¶å‘è®¿é—®çš„çº¿ç¨‹å®‰å…¨é›†åˆç±»ã€‚å®ƒé€šè¿‡åˆ†æ®µé”æœºåˆ¶æ¥æé«˜å¹¶å‘æ€§èƒ½ã€‚ç„¶è€Œï¼Œå°½ç®¡ ConcurrentHashMap èƒ½å¤Ÿä¿è¯å•ä¸ªæ“ä½œçš„çº¿ç¨‹å®‰å…¨æ€§ï¼Œä½†å®ƒä¸èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§ã€‚</p>
<h2 id="å•ä¸ªæ“ä½œçš„çº¿ç¨‹å®‰å…¨æ€§"><a href="#å•ä¸ªæ“ä½œçš„çº¿ç¨‹å®‰å…¨æ€§" class="headerlink" title="å•ä¸ªæ“ä½œçš„çº¿ç¨‹å®‰å…¨æ€§"></a>å•ä¸ªæ“ä½œçš„çº¿ç¨‹å®‰å…¨æ€§</h2><p>ConcurrentHashMapä¸­çš„å•ä¸ªæ“ä½œï¼Œå¦‚put(),get(),remove()ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¿™æ„å‘³ç€å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶æ‰§è¡Œè¿™äº›æ“ä½œè€Œä¸ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´æˆ–æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<h2 id="å¤åˆæ“ä½œçš„åŸå­æ€§"><a href="#å¤åˆæ“ä½œçš„åŸå­æ€§" class="headerlink" title="å¤åˆæ“ä½œçš„åŸå­æ€§"></a>å¤åˆæ“ä½œçš„åŸå­æ€§</h2><p>å¤åˆæ“ä½œæ˜¯æŒ‡å¤šä¸ªåŸºæœ¬æ“ä½œçš„ç»„åˆï¼Œä¾‹å¦‚â€œæ£€æŸ¥-ç„¶å-æ‰§è¡Œâ€æ¨¡å¼ï¼ˆcheck-then-actï¼‰ï¼Œå¦‚ï¼š</p>
<p>å¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ ä¸€ä¸ªæ–°çš„é”®å€¼å¯¹ã€‚å¦‚æœé”®å­˜åœ¨ï¼Œåˆ™æ›´æ–°å…¶å€¼ã€‚</p>
<p>è¿™äº›æ“ä½œåœ¨ConcurrentHashMapä¸­ä¸æ˜¯åŸå­æ€§çš„ï¼Œå› ä¸ºåœ¨æ‰§è¡Œå¤åˆæ“ä½œçš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šæœ‰å…¶ä»–çº¿ç¨‹å¯¹ConcurrentHashMapè¿›è¡Œä¿®æ”¹ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ConcurrentHashMap&lt;String, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">// æ£€æŸ¥æ˜¯å¦åŒ…å«é”®ï¼Œç„¶åæ·»åŠ é”®å€¼å¯¹</span><br><span class="line">if (!map.containsKey(&quot;key&quot;)) &#123;</span><br><span class="line">    map.put(&quot;key&quot;, 1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºåœ¨containsKey()å’Œput()ä¹‹é—´ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½å·²ç»æ’å…¥äº†ç›¸åŒçš„é”®ã€‚</p>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>ä¸ºäº†ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§ï¼Œå¯ä»¥ä½¿ç”¨ConcurrentHashMapæä¾›çš„åŸå­æ–¹æ³•ï¼Œå¦‚computeIfAbsent(),compute(),merge()ç­‰ã€‚è¿™äº›æ–¹æ³•å…è®¸åœ¨å•ä¸ªæ“ä½œä¸­æ‰§è¡Œå¤æ‚çš„è®¡ç®—ï¼Œä»è€Œä¿è¯æ“ä½œçš„åŸå­æ€§ã€‚</p>
<h3 id="ä½¿ç”¨computeIfAbsent"><a href="#ä½¿ç”¨computeIfAbsent" class="headerlink" title="ä½¿ç”¨computeIfAbsent()"></a>ä½¿ç”¨<code>computeIfAbsent()</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map.computeIfAbsent(&quot;key&quot;, k -&gt; 1);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœé”®<code>&quot;key&quot;</code>ä¸å­˜åœ¨ï¼Œåˆ™å°†å…¶å€¼è®¾ç½®ä¸º<code>1</code>ã€‚æ­¤æ“ä½œæ˜¯åŸå­æ€§çš„ã€‚</p>
<h3 id="ä½¿ç”¨compute"><a href="#ä½¿ç”¨compute" class="headerlink" title="ä½¿ç”¨compute()"></a>ä½¿ç”¨<code>compute()</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map.compute(&quot;key&quot;, (k, v) -&gt; (v == null) ? 1 : v + 1);</span><br></pre></td></tr></table></figure>

<p>æ­¤æ–¹æ³•å…è®¸å¯¹é”®è¿›è¡Œè®¡ç®—ï¼Œå¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™<code>v</code>ä¸º<code>null</code>ï¼Œå¦åˆ™å¯ä»¥å¯¹å…¶å€¼è¿›è¡Œæ›´æ–°ã€‚</p>
<h3 id="ä½¿ç”¨merge"><a href="#ä½¿ç”¨merge" class="headerlink" title="ä½¿ç”¨merge()"></a>ä½¿ç”¨<code>merge()</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map.merge(&quot;key&quot;, 1, Integer::sum);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœé”®<code>&quot;key&quot;</code>å­˜åœ¨ï¼Œåˆ™å°†å…¶å€¼ä¸<code>1</code>ç›¸åŠ ï¼Œå¦åˆ™å°†å…¶å€¼è®¾ç½®ä¸º<code>1</code>ã€‚æ­¤æ“ä½œä¹Ÿæ˜¯åŸå­æ€§çš„ã€‚</p>
<blockquote>
<p>&#x2F;bg29eue26kgthvqq&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/Enumeration%E5%92%8CIterator%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/Enumeration%E5%92%8CIterator%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F/" itemprop="url">Enumerationå’ŒIteratoræ¥å£çš„åŒºåˆ«</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘ŒEnumerationå’ŒIteratoræ¥å£çš„åŒºåˆ«ï¼Ÿ"><a href="#ğŸ‘ŒEnumerationå’ŒIteratoræ¥å£çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="ğŸ‘ŒEnumerationå’ŒIteratoræ¥å£çš„åŒºåˆ«ï¼Ÿ"></a>ğŸ‘ŒEnumerationå’ŒIteratoræ¥å£çš„åŒºåˆ«ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>Enumerationå’ŒIteratoræ˜¯ Java ä¸­ç”¨äºéå†é›†åˆçš„ä¸¤ä¸ªæ¥å£ã€‚è™½ç„¶å®ƒä»¬æœ‰ç›¸ä¼¼çš„åŠŸèƒ½ï¼Œä½†å®ƒä»¬æœ‰ä¸åŒçš„è®¾è®¡å’Œä½¿ç”¨æ–¹å¼ã€‚</p>
<h2 id="Enumerationæ¥å£"><a href="#Enumerationæ¥å£" class="headerlink" title="Enumerationæ¥å£"></a>Enumerationæ¥å£</h2><p>Enumerationæ˜¯ä¸€ä¸ªè¾ƒè€çš„æ¥å£ï¼Œå­˜åœ¨äº Java 1.0 ä¸­ã€‚å®ƒä¸»è¦ç”¨äºéå†æ—§çš„é›†åˆç±»ï¼Œå¦‚Vectorå’ŒHashtableã€‚</p>
<h3 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h3><p>boolean hasMoreElements(): å¦‚æœæšä¸¾ä¸­ä»æœ‰æ›´å¤šå…ƒç´ ï¼Œåˆ™è¿”å›trueã€‚</p>
<p>Object nextElement(): è¿”å›æšä¸¾ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</p>
<h3 id="ä»£ç -Demo"><a href="#ä»£ç -Demo" class="headerlink" title="ä»£ç  Demo"></a>ä»£ç  Demo</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class EnumerationExample &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Vector&lt;String&gt; vector = new Vector&lt;&gt;();</span><br><span class="line">        vector.add(&quot;A&quot;);</span><br><span class="line">        vector.add(&quot;B&quot;);</span><br><span class="line">        vector.add(&quot;C&quot;);</span><br><span class="line"></span><br><span class="line">        Enumeration&lt;String&gt; enumeration = vector.elements();</span><br><span class="line">        while (enumeration.hasMoreElements()) &#123;</span><br><span class="line">            String element = enumeration.nextElement();</span><br><span class="line">            System.out.println(element);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Iteratoræ¥å£"><a href="#Iteratoræ¥å£" class="headerlink" title="Iteratoræ¥å£"></a>Iteratoræ¥å£</h2><p>Iteratoræ˜¯åœ¨ Java 2 (JDK 1.2) ä¸­å¼•å…¥çš„ã€‚å®ƒæ˜¯é›†åˆæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œé€‚ç”¨äºæ‰€æœ‰é›†åˆç±»ï¼ˆå¦‚ArrayListã€HashSetã€HashMapç­‰ï¼‰ã€‚Iteratoræä¾›äº†æ›´çµæ´»çš„éå†æ–¹æ³•ï¼Œå¹¶å…è®¸åœ¨éå†è¿‡ç¨‹ä¸­å®‰å…¨åœ°ç§»é™¤å…ƒç´ ã€‚</p>
<h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><p>boolean hasNext(): å¦‚æœè¿­ä»£å™¨ä¸­ä»æœ‰æ›´å¤šå…ƒç´ ï¼Œåˆ™è¿”å›trueã€‚</p>
<p>E next(): è¿”å›è¿­ä»£å™¨ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</p>
<p>void remove(): ä»é›†åˆä¸­ç§»é™¤è¿­ä»£å™¨è¿”å›çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆå¯é€‰æ“ä½œï¼‰ã€‚</p>
<h3 id="ä»£ç -Demo-1"><a href="#ä»£ç -Demo-1" class="headerlink" title="ä»£ç  Demo"></a>ä»£ç  Demo</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class IteratorExample &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">        list.add(&quot;A&quot;);</span><br><span class="line">        list.add(&quot;B&quot;);</span><br><span class="line">        list.add(&quot;C&quot;);</span><br><span class="line"></span><br><span class="line">        Iterator&lt;String&gt; iterator = list.iterator();</span><br><span class="line">        while (iterator.hasNext()) &#123;</span><br><span class="line">            String element = iterator.next();</span><br><span class="line">            System.out.println(element);</span><br><span class="line">            if (element.equals(&quot;B&quot;)) &#123;</span><br><span class="line">                iterator.remove(); // å®‰å…¨åœ°ç§»é™¤å…ƒç´ </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;After removal: &quot; + list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸»è¦åŒºåˆ«"><a href="#ä¸»è¦åŒºåˆ«" class="headerlink" title="ä¸»è¦åŒºåˆ«"></a>ä¸»è¦åŒºåˆ«</h2><p><strong>æ¥å£å¼•å…¥æ—¶é—´</strong>ï¼š</p>
<p>Enumerationï¼šå¼•å…¥äº Java 1.0ã€‚</p>
<p>Iteratorï¼šå¼•å…¥äº Java 2 (JDK 1.2)ã€‚</p>
<p><strong>æ–¹æ³•åç§°å’ŒåŠŸèƒ½</strong>ï¼š</p>
<p>Enumerationï¼šä½¿ç”¨hasMoreElements()å’ŒnextElement()æ–¹æ³•ã€‚</p>
<p>Iteratorï¼šä½¿ç”¨hasNext()å’Œnext()æ–¹æ³•ï¼Œå¹¶å¢åŠ äº†remove()æ–¹æ³•ã€‚</p>
<p><strong>å…ƒç´ ç§»é™¤</strong>ï¼š</p>
<p>Enumerationï¼šä¸æ”¯æŒåœ¨éå†è¿‡ç¨‹ä¸­ç§»é™¤å…ƒç´ ã€‚</p>
<p>Iteratorï¼šæ”¯æŒåœ¨éå†è¿‡ç¨‹ä¸­å®‰å…¨åœ°ç§»é™¤å…ƒç´ ï¼ˆé€šè¿‡remove()æ–¹æ³•ï¼‰ã€‚</p>
<p><strong>é€‚ç”¨èŒƒå›´</strong>ï¼š</p>
<p>Enumerationï¼šä¸»è¦ç”¨äºæ—§çš„é›†åˆç±»ï¼Œå¦‚Vectorå’ŒHashtableã€‚</p>
<p>Iteratorï¼šé€‚ç”¨äºæ‰€æœ‰é›†åˆç±»ï¼Œæ˜¯é›†åˆæ¡†æ¶çš„ä¸€éƒ¨åˆ†ã€‚</p>
<blockquote>
<p>&#x2F;vk496pkev2ub6nh4&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/HashMap%E6%80%8E%E4%B9%88%E8%AE%A1%E7%AE%97hashCode%E7%9A%84%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/HashMap%E6%80%8E%E4%B9%88%E8%AE%A1%E7%AE%97hashCode%E7%9A%84%EF%BC%9F/" itemprop="url">HashMapæ€ä¹ˆè®¡ç®—hashCodeçš„ï¼Ÿ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘ŒHashMapæ€ä¹ˆè®¡ç®—hashCodeçš„ï¼Ÿ"><a href="#ğŸ‘ŒHashMapæ€ä¹ˆè®¡ç®—hashCodeçš„ï¼Ÿ" class="headerlink" title="ğŸ‘ŒHashMapæ€ä¹ˆè®¡ç®—hashCodeçš„ï¼Ÿ"></a>ğŸ‘ŒHashMapæ€ä¹ˆè®¡ç®—hashCodeçš„ï¼Ÿ</h1><p>HashMapä½¿ç”¨é”®çš„hashCode()æ–¹æ³•æ¥ç”Ÿæˆå“ˆå¸Œå€¼ï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¸€äº›å¤„ç†ï¼Œä»¥æé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½å’Œå‡åŒ€åˆ†å¸ƒã€‚</p>
<h2 id="è°ƒç”¨é”®çš„hashCode-æ–¹æ³•"><a href="#è°ƒç”¨é”®çš„hashCode-æ–¹æ³•" class="headerlink" title="è°ƒç”¨é”®çš„hashCode()æ–¹æ³•"></a>è°ƒç”¨é”®çš„hashCode()æ–¹æ³•</h2><p>é¦–å…ˆï¼ŒHashMapè°ƒç”¨é”®å¯¹è±¡çš„hashCode()æ–¹æ³•æ¥è·å–ä¸€ä¸ªæ•´æ•°å“ˆå¸Œç ã€‚è¿™ä¸ªå“ˆå¸Œç æ˜¯ç”±é”®å¯¹è±¡çš„ç±»å®šä¹‰çš„ï¼Œé€šå¸¸æ˜¯é€šè¿‡æŸç§ç®—æ³•åŸºäºå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€è®¡ç®—å‡ºæ¥çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int hashCode= key.hashCode();</span><br></pre></td></tr></table></figure>

<h2 id="æ‰°åŠ¨å‡½æ•°-Perturbation-Function"><a href="#æ‰°åŠ¨å‡½æ•°-Perturbation-Function" class="headerlink" title="æ‰°åŠ¨å‡½æ•° (Perturbation Function)"></a>æ‰°åŠ¨å‡½æ•° (Perturbation Function)</h2><p>ä¸ºäº†å‡å°‘å“ˆå¸Œå†²çªå¹¶ä½¿å“ˆå¸Œç æ›´åŠ å‡åŒ€åœ°åˆ†å¸ƒï¼ŒHashMapå¯¹åŸå§‹å“ˆå¸Œç è¿›è¡Œäº†ä¸€äº›é¢å¤–çš„å¤„ç†ã€‚è¿™ç§å¤„ç†è¢«ç§°ä¸ºæ‰°åŠ¨å‡½æ•°ã€‚Java 8 åŠä»¥åçš„HashMapå®ç°ä½¿ç”¨ä»¥ä¸‹ç®—æ³•æ¥è®¡ç®—æœ€ç»ˆçš„å“ˆå¸Œå€¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">static final int hash(Object key) &#123;</span><br><span class="line">    int h;</span><br><span class="line">    return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªç®—æ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>è·å–é”®çš„å“ˆå¸Œç </strong>ï¼šh &#x3D; key.hashCode()</li>
<li><strong>å³ç§» 16 ä½</strong>ï¼šh &gt;&gt;&gt; 16</li>
<li><strong>å¼‚æˆ–è¿ç®—</strong>ï¼šh ^ (h &gt;&gt;&gt; 16)</li>
</ol>
<p>è¿™ç§æ–¹æ³•é€šè¿‡å°†é«˜ä½å’Œä½ä½çš„å“ˆå¸Œç æ··åˆåœ¨ä¸€èµ·ï¼Œå‡å°‘äº†å“ˆå¸Œå†²çªçš„æ¦‚ç‡ï¼Œä»è€Œä½¿å¾—å“ˆå¸Œç æ›´åŠ å‡åŒ€åœ°åˆ†å¸ƒåœ¨å“ˆå¸Œè¡¨çš„æ¡¶ä¸­ã€‚</p>
<h2 id="è®¡ç®—æ•°ç»„ç´¢å¼•"><a href="#è®¡ç®—æ•°ç»„ç´¢å¼•" class="headerlink" title="è®¡ç®—æ•°ç»„ç´¢å¼•"></a>è®¡ç®—æ•°ç»„ç´¢å¼•</h2><p>è®¡ç®—å‡ºæ‰°åŠ¨åçš„å“ˆå¸Œå€¼åï¼ŒHashMapä½¿ç”¨è¿™ä¸ªå€¼æ¥ç¡®å®šé”®å€¼å¯¹åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®ã€‚é€šå¸¸ï¼ŒHashMapä½¿ç”¨å“ˆå¸Œå€¼å¯¹æ•°ç»„çš„é•¿åº¦å–æ¨¡ï¼ˆå–ä½™æ•°ï¼‰æ¥è®¡ç®—ç´¢å¼•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int index = (n - 1) &amp; hash;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼Œnæ˜¯å“ˆå¸Œè¡¨æ•°ç»„çš„é•¿åº¦ã€‚né€šå¸¸æ˜¯ 2 çš„å¹‚ï¼Œè¿™æ ·(n - 1)å°±æ˜¯ä¸€ä¸ªå…¨ 1 çš„äºŒè¿›åˆ¶æ•°ï¼Œè¿™ä½¿å¾—æŒ‰ä½ä¸æ“ä½œ&amp;å¯ä»¥æœ‰æ•ˆåœ°æ›¿ä»£å–æ¨¡æ“ä½œ%ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</p>
<h1 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h1><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªé”®å¯¹è±¡ï¼Œå…¶hashCode()è¿”å›å€¼ä¸º 123456ã€‚é‚£ä¹ˆï¼Œè®¡ç®—å“ˆå¸Œå€¼çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>è°ƒç”¨hashCode()æ–¹æ³•ï¼šint hashCode &#x3D; 123456;</li>
<li>æ‰°åŠ¨å‡½æ•°è®¡ç®—ï¼š<ul>
<li>h &#x3D; 123456</li>
<li>h &gt;&gt;&gt; 16 &#x3D; 123456 &gt;&gt;&gt; 16 &#x3D; 1ï¼ˆå³ç§» 16 ä½ï¼‰</li>
<li>hash &#x3D; h ^ (h &gt;&gt;&gt; 16) &#x3D; 123456 ^ 1 &#x3D; 123457</li>
</ul>
</li>
<li>è®¡ç®—æ•°ç»„ç´¢å¼•ï¼ˆå‡è®¾æ•°ç»„é•¿åº¦nä¸º 16ï¼Œå³n - 1ä¸º 15ï¼‰ï¼š<ul>
<li>index &#x3D; (15) &amp; 123457 &#x3D; 15 &amp; 123457 &#x3D; 1</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆï¼Œé”®å€¼å¯¹å°†å­˜å‚¨åœ¨å“ˆå¸Œè¡¨æ•°ç»„çš„ç´¢å¼• 1 ä½ç½®ã€‚</p>
<blockquote>
<p>&#x2F;str1ewvagoc4qesr&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/HashMap%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8F%82%E6%95%B0%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/HashMap%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8F%82%E6%95%B0%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F/" itemprop="url">HashMapçš„ä¸»è¦å‚æ•°éƒ½æœ‰å“ªäº›</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘ŒHashMapçš„ä¸»è¦å‚æ•°éƒ½æœ‰å“ªäº›ï¼Ÿ"><a href="#ğŸ‘ŒHashMapçš„ä¸»è¦å‚æ•°éƒ½æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="ğŸ‘ŒHashMapçš„ä¸»è¦å‚æ•°éƒ½æœ‰å“ªäº›ï¼Ÿ"></a>ğŸ‘ŒHashMapçš„ä¸»è¦å‚æ•°éƒ½æœ‰å“ªäº›ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><h2 id="åˆå§‹å®¹é‡ï¼ˆInitial-Capacityï¼‰"><a href="#åˆå§‹å®¹é‡ï¼ˆInitial-Capacityï¼‰" class="headerlink" title="åˆå§‹å®¹é‡ï¼ˆInitial Capacityï¼‰"></a>åˆå§‹å®¹é‡ï¼ˆInitial Capacityï¼‰</h2><p>åˆå§‹å®¹é‡æ˜¯HashMapåœ¨åˆ›å»ºæ—¶åˆ†é…çš„æ¡¶ï¼ˆbucketï¼‰æ•°ç»„çš„å¤§å°ã€‚é»˜è®¤åˆå§‹å®¹é‡æ˜¯ 16ã€‚å¯ä»¥åœ¨åˆ›å»ºHashMapæ—¶é€šè¿‡æ„é€ å‡½æ•°æŒ‡å®šåˆå§‹å®¹é‡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;K, V&gt; map = newHashMap&lt;&gt;(initialCapacity);</span><br></pre></td></tr></table></figure>

<h2 id="è´Ÿè½½å› å­ï¼ˆLoad-Factorï¼‰"><a href="#è´Ÿè½½å› å­ï¼ˆLoad-Factorï¼‰" class="headerlink" title="è´Ÿè½½å› å­ï¼ˆLoad Factorï¼‰"></a>è´Ÿè½½å› å­ï¼ˆLoad Factorï¼‰</h2><p>è´Ÿè½½å› å­æ˜¯ä¸€ä¸ªè¡¡é‡HashMapä½•æ—¶éœ€è¦è°ƒæ•´å¤§å°ï¼ˆå³æ‰©å®¹ï¼‰çš„å‚æ•°ã€‚é»˜è®¤è´Ÿè½½å› å­æ˜¯ 0.75ï¼Œè¿™æ„å‘³ç€å½“HashMapä¸­çš„æ¡ç›®æ•°è¾¾åˆ°å½“å‰å®¹é‡çš„ 75% æ—¶ï¼ŒHashMapä¼šè¿›è¡Œæ‰©å®¹ã€‚è´Ÿè½½å› å­è¶Šä½ï¼Œå“ˆå¸Œè¡¨ä¸­çš„ç©ºé—²ç©ºé—´è¶Šå¤šï¼Œå†²çªè¶Šå°‘ï¼Œä½†ç©ºé—´åˆ©ç”¨ç‡ä¹Ÿè¶Šä½ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;K, V&gt; map = newHashMap&lt;&gt;(initialCapacity, loadFactor);</span><br></pre></td></tr></table></figure>

<h2 id="é˜ˆå€¼ï¼ˆThresholdï¼‰"><a href="#é˜ˆå€¼ï¼ˆThresholdï¼‰" class="headerlink" title="é˜ˆå€¼ï¼ˆThresholdï¼‰"></a>é˜ˆå€¼ï¼ˆThresholdï¼‰</h2><p>é˜ˆå€¼æ˜¯HashMapéœ€è¦æ‰©å®¹çš„ä¸´ç•Œç‚¹ï¼Œè®¡ç®—æ–¹å¼ä¸ºåˆå§‹å®¹é‡ * è´Ÿè½½å› å­ã€‚å½“å®é™…å­˜å‚¨çš„é”®å€¼å¯¹æ•°é‡è¶…è¿‡è¿™ä¸ªé˜ˆå€¼æ—¶ï¼ŒHashMapä¼šè¿›è¡Œæ‰©å®¹ã€‚</p>
<h2 id="æ¡¶ï¼ˆBucketï¼‰"><a href="#æ¡¶ï¼ˆBucketï¼‰" class="headerlink" title="æ¡¶ï¼ˆBucketï¼‰"></a>æ¡¶ï¼ˆBucketï¼‰</h2><p>HashMapå†…éƒ¨ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨é“¾è¡¨æˆ–æ ‘ï¼ˆåœ¨ Java 8 åŠä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œå½“é“¾è¡¨é•¿åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶ï¼Œä¼šè½¬åŒ–ä¸ºæ ‘ï¼‰ã€‚æ¯ä¸ªæ•°ç»„å…ƒç´ ç§°ä¸ºä¸€ä¸ªæ¡¶ï¼ˆbucketï¼‰ã€‚å“ˆå¸Œå€¼ç»è¿‡è®¡ç®—åå†³å®šäº†é”®å€¼å¯¹å­˜å‚¨åœ¨å“ªä¸ªæ¡¶ä¸­ã€‚</p>
<h2 id="å“ˆå¸Œå‡½æ•°ï¼ˆHash-Functionï¼‰"><a href="#å“ˆå¸Œå‡½æ•°ï¼ˆHash-Functionï¼‰" class="headerlink" title="å“ˆå¸Œå‡½æ•°ï¼ˆHash Functionï¼‰"></a>å“ˆå¸Œå‡½æ•°ï¼ˆHash Functionï¼‰</h2><p>HashMapä½¿ç”¨å“ˆå¸Œå‡½æ•°å°†é”®çš„å“ˆå¸Œç è½¬æ¢ä¸ºæ•°ç»„ç´¢å¼•ã€‚Java çš„HashMapä½¿ç”¨äº†æ‰°åŠ¨å‡½æ•°ï¼ˆperturbation functionï¼‰æ¥å‡å°‘å“ˆå¸Œå†²çªï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">static final int hash(Object key) &#123;</span><br><span class="line">    int h;</span><br><span class="line">    return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é“¾è¡¨å’Œæ ‘ï¼ˆLinked-List-and-Treeï¼‰"><a href="#é“¾è¡¨å’Œæ ‘ï¼ˆLinked-List-and-Treeï¼‰" class="headerlink" title="é“¾è¡¨å’Œæ ‘ï¼ˆLinked List and Treeï¼‰"></a>é“¾è¡¨å’Œæ ‘ï¼ˆLinked List and Treeï¼‰</h2><p>åœ¨æ¡¶ä¸­çš„é”®å€¼å¯¹å­˜å‚¨æ–¹å¼ä¸Šï¼ŒHashMapä½¿ç”¨é“¾è¡¨æ¥å¤„ç†å“ˆå¸Œå†²çªã€‚åœ¨ Java 8 åŠä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œå½“é“¾è¡¨çš„é•¿åº¦è¶…è¿‡é˜ˆå€¼ï¼ˆé»˜è®¤æ˜¯ 8ï¼‰æ—¶ï¼Œé“¾è¡¨ä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œä»¥æé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚</p>
<h2 id="çº¢é»‘æ ‘è½¬æ¢é˜ˆå€¼ï¼ˆTreeify-Thresholdï¼‰"><a href="#çº¢é»‘æ ‘è½¬æ¢é˜ˆå€¼ï¼ˆTreeify-Thresholdï¼‰" class="headerlink" title="çº¢é»‘æ ‘è½¬æ¢é˜ˆå€¼ï¼ˆTreeify Thresholdï¼‰"></a>çº¢é»‘æ ‘è½¬æ¢é˜ˆå€¼ï¼ˆTreeify Thresholdï¼‰</h2><p>è¿™æ˜¯ä¸€ä¸ªé˜ˆå€¼ï¼Œå½“å•ä¸ªæ¡¶ä¸­çš„é“¾è¡¨é•¿åº¦è¶…è¿‡è¿™ä¸ªå€¼æ—¶ï¼Œé“¾è¡¨ä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚é»˜è®¤å€¼æ˜¯ 8ã€‚</p>
<h2 id="æœ€å°æ ‘åŒ–å®¹é‡ï¼ˆMinimum-Treeify-Capacityï¼‰"><a href="#æœ€å°æ ‘åŒ–å®¹é‡ï¼ˆMinimum-Treeify-Capacityï¼‰" class="headerlink" title="æœ€å°æ ‘åŒ–å®¹é‡ï¼ˆMinimum Treeify Capacityï¼‰"></a>æœ€å°æ ‘åŒ–å®¹é‡ï¼ˆMinimum Treeify Capacityï¼‰</h2><p>è¿™æ˜¯ä¸€ä¸ªé˜ˆå€¼ï¼Œå½“HashMapçš„å®¹é‡å°äºè¿™ä¸ªå€¼æ—¶ï¼Œå³ä½¿é“¾è¡¨é•¿åº¦è¶…è¿‡Treeify Thresholdï¼Œä¹Ÿä¸ä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œè€Œæ˜¯ä¼šå…ˆè¿›è¡Œæ‰©å®¹ã€‚é»˜è®¤å€¼æ˜¯ 64ã€‚</p>
<h2 id="æ‰©å®¹å› å­ï¼ˆResize-Factorï¼‰"><a href="#æ‰©å®¹å› å­ï¼ˆResize-Factorï¼‰" class="headerlink" title="æ‰©å®¹å› å­ï¼ˆResize Factorï¼‰"></a>æ‰©å®¹å› å­ï¼ˆResize Factorï¼‰</h2><p>å½“HashMapçš„å¤§å°è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œå®¹é‡ä¼šåŠ å€ã€‚å³æ–°çš„å®¹é‡æ˜¯æ—§å®¹é‡çš„ä¸¤å€ã€‚</p>
<h2 id="è¿­ä»£å™¨ï¼ˆIteratorsï¼‰"><a href="#è¿­ä»£å™¨ï¼ˆIteratorsï¼‰" class="headerlink" title="è¿­ä»£å™¨ï¼ˆIteratorsï¼‰"></a>è¿­ä»£å™¨ï¼ˆIteratorsï¼‰</h2><p>HashMapæä¾›äº†é”®ã€å€¼å’Œæ¡ç›®çš„è¿­ä»£å™¨ï¼Œç”¨äºéå†HashMapä¸­çš„å…ƒç´ ã€‚è¿­ä»£å™¨æ˜¯å¿«é€Ÿå¤±è´¥çš„ï¼ˆfail-fastï¼‰ï¼Œå³åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå¦‚æœHashMapç»“æ„è¢«ä¿®æ”¹ï¼ˆé™¤äº†é€šè¿‡è¿­ä»£å™¨è‡ªèº«çš„removeæ–¹æ³•ï¼‰ï¼Œè¿­ä»£å™¨ä¼šæŠ›å‡ºConcurrentModificationExceptionã€‚</p>
<h2 id="ç‰ˆæœ¬ï¼ˆModCountï¼‰"><a href="#ç‰ˆæœ¬ï¼ˆModCountï¼‰" class="headerlink" title="ç‰ˆæœ¬ï¼ˆModCountï¼‰"></a>ç‰ˆæœ¬ï¼ˆModCountï¼‰</h2><p>HashMapç»´æŠ¤äº†ä¸€ä¸ªå†…éƒ¨ç‰ˆæœ¬å·modCountï¼Œç”¨äºè·Ÿè¸ªHashMapçš„ç»“æ„ä¿®æ”¹æ¬¡æ•°ã€‚è¿™åœ¨è¿­ä»£å™¨ä¸­ç”¨äºæ£€æµ‹å¹¶å‘ä¿®æ”¹ã€‚</p>
<p>è¿™äº›å‚æ•°å’Œå±æ€§å…±åŒå†³å®šäº†HashMapçš„æ€§èƒ½å’Œè¡Œä¸ºã€‚ç†è§£è¿™äº›å‚æ•°å¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ä½¿ç”¨HashMapï¼Œå¹¶åœ¨éœ€è¦æ—¶è¿›è¡Œé€‚å½“çš„è°ƒæ•´ä»¥æ»¡è¶³ç‰¹å®šçš„æ€§èƒ½éœ€æ±‚ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/HashMap%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9B%A0%E5%AD%90%E5%88%9D%E5%A7%8B%E5%80%BC%E4%B8%BA%E4%BB%80%E4%B9%88%E6%98%AF0.75_/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/HashMap%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9B%A0%E5%AD%90%E5%88%9D%E5%A7%8B%E5%80%BC%E4%B8%BA%E4%BB%80%E4%B9%88%E6%98%AF0.75_/" itemprop="url">HashMapçš„è´Ÿè½½å› å­åˆå§‹å€¼ä¸ºä»€ä¹ˆæ˜¯0.75</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘ŒHashMapçš„è´Ÿè½½å› å­åˆå§‹å€¼ä¸ºä»€ä¹ˆæ˜¯0-75"><a href="#ğŸ‘ŒHashMapçš„è´Ÿè½½å› å­åˆå§‹å€¼ä¸ºä»€ä¹ˆæ˜¯0-75" class="headerlink" title="ğŸ‘ŒHashMapçš„è´Ÿè½½å› å­åˆå§‹å€¼ä¸ºä»€ä¹ˆæ˜¯0.75?"></a>ğŸ‘ŒHashMapçš„è´Ÿè½½å› å­åˆå§‹å€¼ä¸ºä»€ä¹ˆæ˜¯0.75?</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>HashMapçš„è´Ÿè½½å› å­ï¼ˆload factorï¼‰åˆå§‹å€¼è®¾ä¸º 0.75 æ˜¯ä¸€ä¸ªç»è¿‡æƒè¡¡çš„ç»“æœï¼Œä¸»è¦è€ƒè™‘äº†æ€§èƒ½å’Œå†…å­˜ä½¿ç”¨ä¹‹é—´çš„å¹³è¡¡ã€‚</p>
<h2 id="æ€§èƒ½ä¸å†…å­˜ä½¿ç”¨çš„å¹³è¡¡"><a href="#æ€§èƒ½ä¸å†…å­˜ä½¿ç”¨çš„å¹³è¡¡" class="headerlink" title="æ€§èƒ½ä¸å†…å­˜ä½¿ç”¨çš„å¹³è¡¡"></a>æ€§èƒ½ä¸å†…å­˜ä½¿ç”¨çš„å¹³è¡¡</h2><p><strong>æŸ¥æ‰¾æ€§èƒ½</strong>ï¼šåœ¨HashMapä¸­ï¼ŒæŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ¥è¿‘ (O(1))ã€‚ç„¶è€Œï¼Œå½“å“ˆå¸Œè¡¨ä¸­çš„å…ƒç´ è¿‡å¤šæ—¶ï¼Œé“¾åœ°å€æ³•ä¸­çš„é“¾è¡¨ä¼šå˜é•¿ï¼ŒæŸ¥æ‰¾æ—¶é—´ä¼šå¢åŠ ã€‚è´Ÿè½½å› å­ä¸º 0.75 æ„å‘³ç€åœ¨è¡¨è¾¾åˆ° 75% æ»¡æ—¶è¿›è¡Œæ‰©å®¹ï¼Œè¿™æ ·å¯ä»¥ä¿æŒé“¾è¡¨çš„é•¿åº¦è¾ƒçŸ­ï¼Œä»è€Œä¿è¯æŸ¥æ‰¾æ“ä½œçš„é«˜æ•ˆæ€§ã€‚</p>
<p><strong>å†…å­˜ä½¿ç”¨</strong>ï¼šå¦‚æœè´Ÿè½½å› å­è®¾ç½®å¾—å¤ªä½ï¼ˆä¾‹å¦‚ 0.5ï¼‰ï¼ŒHashMapä¼šæ›´é¢‘ç¹åœ°æ‰©å®¹ï¼Œéœ€è¦æ›´å¤šçš„å†…å­˜æ¥å­˜å‚¨æœªä½¿ç”¨çš„æ¡¶ã€‚è´Ÿè½½å› å­ä¸º 0.75 æ˜¯ä¸€ä¸ªè¾ƒä¸ºåˆç†çš„è®¾ç½®ï¼Œå¯ä»¥åœ¨ä¿è¯æŸ¥æ‰¾æ€§èƒ½çš„åŒæ—¶ï¼ŒèŠ‚çº¦å†…å­˜ã€‚</p>
<h2 id="æ‰©å®¹é¢‘ç‡"><a href="#æ‰©å®¹é¢‘ç‡" class="headerlink" title="æ‰©å®¹é¢‘ç‡"></a>æ‰©å®¹é¢‘ç‡</h2><p>è¾ƒé«˜çš„è´Ÿè½½å› å­ï¼ˆå¦‚ 1.0ï¼‰ä¼šå‡å°‘æ‰©å®¹çš„é¢‘ç‡ï¼Œä½†ä¼šå¯¼è‡´è¾ƒé•¿çš„é“¾è¡¨æˆ–æ›´å¤šçš„å“ˆå¸Œç¢°æ’ï¼Œä»è€Œå½±å“æŸ¥æ‰¾æ€§èƒ½ã€‚è¾ƒä½çš„è´Ÿè½½å› å­ï¼ˆå¦‚ 0.5ï¼‰ä¼šå¢åŠ æ‰©å®¹çš„é¢‘ç‡ï¼Œè™½ç„¶å¯ä»¥å‡å°‘ç¢°æ’ï¼Œä½†ä¼šå¯¼è‡´æ›´å¤šçš„ç©ºé—´æµªè´¹ã€‚</p>
<p>0.75 æ˜¯ä¸€ä¸ªæŠ˜ä¸­çš„é€‰æ‹©ï¼Œå®ƒæ—¢èƒ½ä¿è¯è¾ƒå°‘çš„å“ˆå¸Œç¢°æ’ï¼Œåˆä¸ä¼šé¢‘ç¹åœ°è¿›è¡Œæ‰©å®¹ï¼Œä»è€Œåœ¨æ€§èƒ½å’Œå†…å­˜ä½¿ç”¨ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p>
<h2 id="å®é™…åº”ç”¨ä¸­çš„ç»éªŒ"><a href="#å®é™…åº”ç”¨ä¸­çš„ç»éªŒ" class="headerlink" title="å®é™…åº”ç”¨ä¸­çš„ç»éªŒ"></a>å®é™…åº”ç”¨ä¸­çš„ç»éªŒ</h2><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ0.75 è¢«è¯æ˜æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„é»˜è®¤å€¼ã€‚å®ƒåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æä¾›äº†è‰¯å¥½çš„æ€§èƒ½å’Œè¾ƒä¸ºåˆç†çš„å†…å­˜ä½¿ç”¨ã€‚å°½ç®¡ç‰¹å®šåº”ç”¨å¯èƒ½æœ‰ä¸åŒçš„éœ€æ±‚ï¼Œä½†å¯¹äºé€šç”¨åœºæ™¯ï¼Œè¿™ä¸ªé»˜è®¤å€¼æ˜¯ç»è¿‡å¤§é‡å®è·µéªŒè¯çš„ã€‚</p>
<h2 id="è´Ÿè½½å› å­çš„çµæ´»æ€§"><a href="#è´Ÿè½½å› å­çš„çµæ´»æ€§" class="headerlink" title="è´Ÿè½½å› å­çš„çµæ´»æ€§"></a>è´Ÿè½½å› å­çš„çµæ´»æ€§</h2><p>è™½ç„¶ 0.75 æ˜¯é»˜è®¤å€¼ï¼Œå¼€å‘è€…åœ¨åˆ›å»ºHashMapæ—¶å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚æŒ‡å®šä¸åŒçš„è´Ÿè½½å› å­ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;Integer, String&gt; map = newHashMap&lt;&gt;(initialCapacity, 0.5f);</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒHashMapçš„è´Ÿè½½å› å­è¢«è®¾ç½®ä¸º 0.5ï¼Œè¿™å¯èƒ½é€‚ç”¨äºéœ€è¦æ›´é«˜æŸ¥æ‰¾æ€§èƒ½ä½†å†…å­˜ä½¿ç”¨ä¸æ˜¯ä¸»è¦è€ƒè™‘å› ç´ çš„åœºæ™¯ã€‚</p>
<p>HashMapé»˜è®¤è´Ÿè½½å› å­ä¸º 0.75 æ˜¯ä¸€ä¸ªç»è¿‡æ·±æ€ç†Ÿè™‘çš„é€‰æ‹©ï¼Œæ—¨åœ¨å¹³è¡¡æŸ¥æ‰¾æ€§èƒ½å’Œå†…å­˜ä½¿ç”¨ã€‚å®ƒåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æä¾›äº†è‰¯å¥½çš„æ€§èƒ½è¡¨ç°ï¼ŒåŒæ—¶é¿å…äº†é¢‘ç¹æ‰©å®¹å’Œè¿‡å¤šçš„å†…å­˜æµªè´¹ã€‚å¼€å‘è€…å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚è°ƒæ•´è´Ÿè½½å› å­ï¼Œä»¥é€‚åº”ä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚</p>
<blockquote>
<p>&#x2F;nokyemihqmhdvppw&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/HashMap%EF%BC%8C%E6%89%A9%E5%AE%B9%E8%BF%87%E7%A8%8B%EF%BC%8C%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E5%93%88%E5%B8%8C%E5%86%B2%E7%AA%81%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/HashMap%EF%BC%8C%E6%89%A9%E5%AE%B9%E8%BF%87%E7%A8%8B%EF%BC%8C%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E5%93%88%E5%B8%8C%E5%86%B2%E7%AA%81%EF%BC%9F/" itemprop="url">HashMapï¼Œæ‰©å®¹è¿‡ç¨‹ï¼Œæ€ä¹ˆè§£å†³å“ˆå¸Œå†²çª</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘ŒHashMapï¼Œæ‰©å®¹è¿‡ç¨‹ï¼Œæ€ä¹ˆè§£å†³å“ˆå¸Œå†²çªï¼Ÿ"><a href="#ğŸ‘ŒHashMapï¼Œæ‰©å®¹è¿‡ç¨‹ï¼Œæ€ä¹ˆè§£å†³å“ˆå¸Œå†²çªï¼Ÿ" class="headerlink" title="ğŸ‘ŒHashMapï¼Œæ‰©å®¹è¿‡ç¨‹ï¼Œæ€ä¹ˆè§£å†³å“ˆå¸Œå†²çªï¼Ÿ"></a>ğŸ‘ŒHashMapï¼Œæ‰©å®¹è¿‡ç¨‹ï¼Œæ€ä¹ˆè§£å†³å“ˆå¸Œå†²çªï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><h2 id="HashMap-æ‰©å®¹è¿‡ç¨‹"><a href="#HashMap-æ‰©å®¹è¿‡ç¨‹" class="headerlink" title="HashMap æ‰©å®¹è¿‡ç¨‹"></a>HashMap æ‰©å®¹è¿‡ç¨‹</h2><p>Hashmap çš„æ‰©å®¹ï¼ˆrehashingï¼‰ä¸»è¦å‘ç”Ÿåœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹ï¼š</p>
<ol>
<li><strong>å½“æ·»åŠ å…ƒç´ æ—¶ï¼Œå¦‚æœå½“å‰æ•°ç»„ä¸ºç©ºï¼Œä¼šè¿›è¡Œåˆå§‹åŒ–</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 16 çš„æ•°ç»„ï¼Œå¹¶ä¸”åŠ è½½å› å­ï¼ˆload factorï¼‰é»˜è®¤ä¸º 0.75ã€‚</li>
<li><strong>å½“æ•°ç»„ä¸­çš„å…ƒç´ æ•°é‡å¤§äºæˆ–ç­‰äºæ•°ç»„é•¿åº¦ä¸åŠ è½½å› å­çš„ä¹˜ç§¯æ—¶</strong>ï¼šä¾‹å¦‚ï¼Œå½“æ•°ç»„é•¿åº¦ä¸º 16ï¼ŒåŠ è½½å› å­ä¸º 0.75ï¼Œå¹¶ä¸”å…ƒç´ æ•°é‡è¾¾åˆ° 12 æ—¶ï¼ˆ16 * 0.75 &#x3D; 12ï¼‰ï¼Œä¼šè§¦å‘æ‰©å®¹ã€‚æ‰©å®¹æ—¶ï¼Œæ•°ç»„é•¿åº¦ä¼šç¿»å€ï¼ˆé€šå¸¸æ˜¯ 2 çš„å¹‚ï¼‰ï¼Œå¹¶é‡æ–°å“ˆå¸Œæ‰€æœ‰å…ƒç´ åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚</li>
</ol>
<p>åœ¨æ‰©å®¹è¿‡ç¨‹ä¸­ï¼Œhashmap ä¼šé‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å“ˆå¸Œå€¼ï¼Œå¹¶æ ¹æ®æ–°çš„æ•°ç»„é•¿åº¦é‡æ–°å®šä½å…¶ç´¢å¼•ä½ç½®ã€‚ç”±äºæ•°ç»„é•¿åº¦ç¿»å€ï¼Œå“ˆå¸Œå€¼çš„ä½è¿ç®—ç»“æœå¯èƒ½ä¼šæ”¹å˜ï¼Œå¯¼è‡´å…ƒç´ åœ¨æ–°æ•°ç»„ä¸­çš„ä½ç½®ä¸æ—§æ•°ç»„ä¸åŒã€‚</p>
<h2 id="å“ˆå¸Œå†²çªè§£å†³"><a href="#å“ˆå¸Œå†²çªè§£å†³" class="headerlink" title="å“ˆå¸Œå†²çªè§£å†³"></a>å“ˆå¸Œå†²çªè§£å†³</h2><p>å“ˆå¸Œå†²çªï¼ˆhash collisionï¼‰æ˜¯æŒ‡ä¸åŒçš„é”®è®¡ç®—å‡ºç›¸åŒçš„å“ˆå¸Œå€¼ï¼Œä»è€Œåœ¨å“ˆå¸Œè¡¨ä¸­æ˜ å°„åˆ°åŒä¸€ä¸ªä½ç½®ã€‚HashMap é€šè¿‡ä»¥ä¸‹ç­–ç•¥æ¥è§£å†³å“ˆå¸Œå†²çªï¼š</p>
<ol>
<li><strong>é“¾è¡¨æ³•ï¼ˆé“¾è¡¨æˆ–çº¢é»‘æ ‘ï¼‰</strong>ï¼šåœ¨ HashMap ä¸­ï¼Œæ¯ä¸ªä½ç½®ï¼ˆç´¢å¼•ï¼‰å¯ä»¥å­˜å‚¨ä¸€ä¸ªé“¾è¡¨ï¼ˆæˆ–çº¢é»‘æ ‘ï¼Œå½“é“¾è¡¨é•¿åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶ï¼‰ã€‚å½“å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ï¼Œæ–°çš„å…ƒç´ ä¼šè¢«æ·»åŠ åˆ°å¯¹åº”çš„é“¾è¡¨ä¸­ã€‚åœ¨ Java 8 åŠä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œå½“é“¾è¡¨é•¿åº¦è¾¾åˆ° 8 ä¸”æ•°ç»„é•¿åº¦å¤§äº 64 æ—¶ï¼Œé“¾è¡¨ä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚</li>
<li><strong>å“ˆå¸Œå‡½æ•°</strong>ï¼šä¸ºäº†é™ä½å“ˆå¸Œå†²çªçš„æ¦‚ç‡ï¼ŒHashMap ä½¿ç”¨äº†ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„å“ˆå¸Œå‡½æ•°æ¥è®¡ç®—é”®çš„å“ˆå¸Œå€¼ã€‚è¿™ä¸ªå“ˆå¸Œå‡½æ•°è€ƒè™‘äº†é”®å¯¹è±¡çš„å“ˆå¸Œç ï¼ˆhashCodeï¼‰ä»¥åŠé”®åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ä½ç½®ï¼Œé€šè¿‡ä¸€äº›ä½è¿ç®—å¾—åˆ°æœ€ç»ˆçš„å“ˆå¸Œå€¼ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿å“ˆå¸Œå€¼çš„åˆ†å¸ƒå°½å¯èƒ½å‡åŒ€ï¼Œå‡å°‘å†²çªçš„å¯èƒ½æ€§ã€‚</li>
<li><strong>åˆå§‹å®¹é‡å’ŒåŠ è½½å› å­</strong>ï¼šåˆå§‹å®¹é‡å’ŒåŠ è½½å› å­ä¹Ÿä¼šå½±å“å“ˆå¸Œå†²çªçš„æ¦‚ç‡ã€‚è¾ƒå¤§çš„åˆå§‹å®¹é‡å’Œè¾ƒå°çš„åŠ è½½å› å­å¯ä»¥é™ä½å“ˆå¸Œå†²çªçš„æ¦‚ç‡ï¼Œä½†ä¹Ÿä¼šå¢åŠ ç©ºé—´å¼€é”€ã€‚å› æ­¤ï¼Œåœ¨é€‰æ‹©è¿™äº›å‚æ•°æ—¶éœ€è¦æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œæƒè¡¡ã€‚</li>
</ol>
<p>æ€»çš„æ¥è¯´ï¼ŒHashMap é€šè¿‡é“¾è¡¨æ³•ï¼ˆæˆ–çº¢é»‘æ ‘ï¼‰å’Œç²¾å¿ƒè®¾è®¡çš„å“ˆå¸Œå‡½æ•°æ¥è§£å†³å“ˆå¸Œå†²çªï¼Œå¹¶é€šè¿‡æ‰©å®¹å’Œé‡æ–°å“ˆå¸Œæ¥ä¿æŒå“ˆå¸Œè¡¨çš„æ€§èƒ½å’Œæ•ˆç‡ã€‚</p>
<blockquote>
<p>&#x2F;nduaqs2uds8td4tw&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/HashSet%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/HashSet%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%EF%BC%9F/" itemprop="url">HashSetå¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘ŒHashSetå¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ"><a href="#ğŸ‘ŒHashSetå¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ" class="headerlink" title="ğŸ‘ŒHashSetå¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ"></a>ğŸ‘ŒHashSetå¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>HashSetæœ¬èº«ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åœ¨æ²¡æœ‰å¤–éƒ¨åŒæ­¥çš„æƒ…å†µä¸‹åŒæ—¶è®¿é—®ä¸€ä¸ªHashSetï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†é›†åˆï¼Œé‚£ä¹ˆå®ƒå¿…é¡»ä¿æŒåŒæ­¥ã€‚</p>
<h2 id="ä½¿ç”¨Collections-synchronizedSet"><a href="#ä½¿ç”¨Collections-synchronizedSet" class="headerlink" title="ä½¿ç”¨Collections.synchronizedSet"></a>ä½¿ç”¨Collections.synchronizedSet</h2><p>Java æä¾›äº†ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªåŒæ­¥çš„é›†åˆï¼Œé€šè¿‡Collections.synchronizedSetæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„é›†åˆåŒ…è£…å™¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; synchronizedSet = Collections.synchronizedSet(newHashSet&lt;&gt;());</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åï¼Œæ‰€æœ‰å¯¹é›†åˆçš„è®¿é—®éƒ½å°†æ˜¯åŒæ­¥çš„ã€‚ä½†æ˜¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºè¿­ä»£æ“ä½œï¼Œå¿…é¡»æ‰‹åŠ¨åŒæ­¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; synchronizedSet = Collections.synchronizedSet(newHashSet&lt;&gt;());</span><br><span class="line">synchronized (synchronizedSet) &#123;</span><br><span class="line">    Iterator&lt;String&gt; iterator = synchronizedSet.iterator();</span><br><span class="line">    while (iterator.hasNext()) &#123;</span><br><span class="line">        System.out.println(iterator.next());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨ConcurrentHashMap"><a href="#ä½¿ç”¨ConcurrentHashMap" class="headerlink" title="ä½¿ç”¨ConcurrentHashMap"></a>ä½¿ç”¨ConcurrentHashMap</h2><p>å¦‚æœéœ€è¦æ›´é«˜æ•ˆçš„å¹¶å‘è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨ConcurrentHashMapæ¥å®ç°ç±»ä¼¼HashSetçš„åŠŸèƒ½ã€‚ConcurrentHashMapæä¾›äº†æ›´ç»†ç²’åº¦çš„é”æœºåˆ¶ï¼Œåœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹æ€§èƒ½æ›´å¥½ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; concurrentSet = ConcurrentHashMap.newKeySet();</span><br></pre></td></tr></table></figure>

<p>ConcurrentHashMap.newKeySet()è¿”å›ä¸€ä¸ªåŸºäºConcurrentHashMapçš„Setå®ç°ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹æ€§èƒ½ä¼˜è¶Šã€‚</p>
<h2 id="ä½¿ç”¨CopyOnWriteArraySet"><a href="#ä½¿ç”¨CopyOnWriteArraySet" class="headerlink" title="ä½¿ç”¨CopyOnWriteArraySet"></a>ä½¿ç”¨CopyOnWriteArraySet</h2><p>å¯¹äºè¯»æ“ä½œè¿œå¤šäºå†™æ“ä½œçš„åœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨CopyOnWriteArraySetã€‚å®ƒçš„å®ç°åŸºäºCopyOnWriteArrayListï¼Œåœ¨æ¯æ¬¡ä¿®æ”¹æ—¶éƒ½ä¼šå¤åˆ¶æ•´ä¸ªåº•å±‚æ•°ç»„ï¼Œå› æ­¤åœ¨å†™æ“ä½œè¾ƒå°‘æ—¶æ€§èƒ½è¾ƒå¥½ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; copyOnWriteArraySet = newCopyOnWriteArraySet&lt;&gt;();</span><br></pre></td></tr></table></figure>

<h2 id="æ‰‹åŠ¨åŒæ­¥"><a href="#æ‰‹åŠ¨åŒæ­¥" class="headerlink" title="æ‰‹åŠ¨åŒæ­¥"></a>æ‰‹åŠ¨åŒæ­¥</h2><p>å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ä¸Šè¿°ä»»ä½•ä¸€ç§æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨åŒæ­¥HashSetçš„è®¿é—®ã€‚å¯ä»¥ä½¿ç”¨synchronizedå…³é”®å­—æ¥ä¿æŠ¤å¯¹HashSetçš„è®¿é—®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; hashSet = newHashSet&lt;&gt;();</span><br><span class="line">synchronized (hashSet) &#123;</span><br><span class="line">    // å¯¹ hashSet çš„æ“ä½œ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆ"><a href="#é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆ" class="headerlink" title="é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆ"></a>é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆ</h2><p>å¦‚æœä½ çš„åº”ç”¨ç¨‹åºæ˜¯å•çº¿ç¨‹çš„ï¼Œæˆ–åªæœ‰å°‘é‡çš„çº¿ç¨‹è®¿é—®é›†åˆï¼Œå¯ä»¥ä½¿ç”¨Collections.synchronizedSetã€‚</p>
<p>å¦‚æœä½ çš„åº”ç”¨ç¨‹åºæœ‰å¤§é‡çš„å¹¶å‘è¯»å†™æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ConcurrentHashMap.newKeySetã€‚</p>
<p>å¦‚æœä½ çš„åº”ç”¨ç¨‹åºè¯»æ“ä½œè¿œå¤šäºå†™æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨CopyOnWriteArraySetã€‚</p>
<h2 id="ä»£ç -Demo"><a href="#ä»£ç -Demo" class="headerlink" title="ä»£ç  Demo"></a>ä»£ç  Demo</h2><p>å†ç»™å¤§å®¶å¼„ä¸€ä¸ªä½¿ç”¨ConcurrentHashMapå®ç°çº¿ç¨‹å®‰å…¨Setçš„ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import java.util.Set;</span><br><span class="line">import java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"></span><br><span class="line">public class ConcurrentHashSetExample &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Set&lt;String&gt; concurrentSet = ConcurrentHashMap.newKeySet();</span><br><span class="line"></span><br><span class="line">        // å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ“ä½œç¤ºä¾‹</span><br><span class="line">        Runnable task = () -&gt; &#123;</span><br><span class="line">            for (int i = 0; i &lt; 1000; i++) &#123;</span><br><span class="line">                concurrentSet.add(Thread.currentThread().getName() + &quot;-&quot; + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        Thread thread1 = new Thread(task, &quot;Thread1&quot;);</span><br><span class="line">        Thread thread2 = new Thread(task, &quot;Thread2&quot;);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            thread1.join();</span><br><span class="line">            thread2.join();</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;Set size: &quot; + concurrentSet.size());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>&#x2F;uic9i6eyh8to1udk&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/Hashset%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/Hashset%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%EF%BC%9F/" itemprop="url">Hashsetçš„åº•å±‚åŸç†</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘ŒHashsetçš„åº•å±‚åŸç†ï¼Ÿ"><a href="#ğŸ‘ŒHashsetçš„åº•å±‚åŸç†ï¼Ÿ" class="headerlink" title="ğŸ‘ŒHashsetçš„åº•å±‚åŸç†ï¼Ÿ"></a>ğŸ‘ŒHashsetçš„åº•å±‚åŸç†ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>HashSetæ˜¯ Java ä¸­ä¸€ä¸ªå¸¸ç”¨çš„é›†åˆç±»ï¼Œå®ƒç”¨äºå­˜å‚¨ä¸é‡å¤çš„å…ƒç´ ã€‚HashSetçš„åº•å±‚å®ç°ä¾èµ–äºHashMapã€‚</p>
<h2 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="headerlink" title="åŸºæœ¬ç»“æ„"></a>åŸºæœ¬ç»“æ„</h2><p>HashSetåº•å±‚ä½¿ç”¨HashMapæ¥å­˜å‚¨å…ƒç´ ã€‚å…·ä½“æ¥è¯´ï¼Œæ¯å½“ä½ å‘HashSetä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œè¿™ä¸ªå…ƒç´ å®é™…ä¸Šæ˜¯ä½œä¸ºHashMapçš„é”®æ¥å­˜å‚¨çš„ï¼Œè€ŒHashMapçš„å€¼æ˜¯ä¸€ä¸ªå›ºå®šçš„å¸¸é‡å¯¹è±¡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class HashSet&lt;E&gt; extends AbstractSet&lt;E&gt; implements Set&lt;E&gt;, Cloneable, java.io.Serializable &#123;</span><br><span class="line">    private transient HashMap&lt;E,Object&gt; map;</span><br><span class="line"></span><br><span class="line">    private static final Object PRESENT = new Object();</span><br><span class="line"></span><br><span class="line">    public HashSet() &#123;</span><br><span class="line">        map = new HashMap&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å…¶ä»–æ„é€ å‡½æ•°å’Œæ–¹æ³•</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ·»åŠ å…ƒç´ -addæ–¹æ³•"><a href="#æ·»åŠ å…ƒç´ -addæ–¹æ³•" class="headerlink" title="æ·»åŠ å…ƒç´  (addæ–¹æ³•)"></a>æ·»åŠ å…ƒç´  (addæ–¹æ³•)</h2><p>å½“ä½ è°ƒç”¨HashSetçš„addæ–¹æ³•æ—¶ï¼ŒHashSetä¼šå°†å…ƒç´ ä½œä¸ºé”®æ’å…¥åˆ°HashMapä¸­ï¼Œå€¼ä¸ºä¸€ä¸ªå¸¸é‡å¯¹è±¡PRESENTã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public boolean add(E e) &#123;</span><br><span class="line">    return map.put(e, PRESENT) == null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>HashMapçš„putæ–¹æ³•ä¼šæ£€æŸ¥é”®æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ’å…¥æ–°é”®å€¼å¯¹ã€‚å¦‚æœé”®å·²ç»å­˜åœ¨ï¼Œåˆ™æ›´æ–°é”®å€¼å¯¹å¹¶è¿”å›æ—§å€¼ã€‚å› æ­¤ï¼ŒHashSetèƒ½å¤Ÿä¿è¯å…ƒç´ å”¯ä¸€æ€§ã€‚</p>
<h2 id="å…ƒç´ æŸ¥æ‰¾-containsæ–¹æ³•"><a href="#å…ƒç´ æŸ¥æ‰¾-containsæ–¹æ³•" class="headerlink" title="å…ƒç´ æŸ¥æ‰¾ (containsæ–¹æ³•)"></a>å…ƒç´ æŸ¥æ‰¾ (containsæ–¹æ³•)</h2><p>HashSetçš„containsæ–¹æ³•å®é™…ä¸Šæ˜¯è°ƒç”¨HashMapçš„containsKeyæ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public boolean contains(Object o) &#123;</span><br><span class="line">    return map.containsKey(o);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>HashMapçš„containsKeyæ–¹æ³•é€šè¿‡è®¡ç®—é”®çš„hashCodeå€¼æ¥å¿«é€Ÿå®šä½å…ƒç´ çš„ä½ç½®ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒã€‚</p>
<h2 id="åˆ é™¤å…ƒç´ -removeæ–¹æ³•"><a href="#åˆ é™¤å…ƒç´ -removeæ–¹æ³•" class="headerlink" title="åˆ é™¤å…ƒç´  (removeæ–¹æ³•)"></a>åˆ é™¤å…ƒç´  (removeæ–¹æ³•)</h2><p>HashSetçš„removeæ–¹æ³•è°ƒç”¨HashMapçš„removeæ–¹æ³•æ¥åˆ é™¤å…ƒç´ ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public boolean remove(Object o) &#123;</span><br><span class="line">    return map.remove(o) == PRESENT;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>&#x2F;zrp0iuq43z8fg3ov&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/Java%E6%8F%90%E4%BE%9B%E4%BA%86%E5%93%AA%E4%BA%9B%E9%98%9F%E5%88%97%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/Java%E6%8F%90%E4%BE%9B%E4%BA%86%E5%93%AA%E4%BA%9B%E9%98%9F%E5%88%97%EF%BC%9F/" itemprop="url">Javaæä¾›äº†å“ªäº›é˜Ÿåˆ—</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘ŒJavaæä¾›äº†å“ªäº›é˜Ÿåˆ—ï¼Ÿ"><a href="#ğŸ‘ŒJavaæä¾›äº†å“ªäº›é˜Ÿåˆ—ï¼Ÿ" class="headerlink" title="ğŸ‘ŒJavaæä¾›äº†å“ªäº›é˜Ÿåˆ—ï¼Ÿ"></a>ğŸ‘ŒJavaæä¾›äº†å“ªäº›é˜Ÿåˆ—ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><h2 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h2><p>åŸºäºé“¾è¡¨å®ç°çš„åŒå‘é“¾è¡¨ï¼Œå®ç°äº†Listã€Dequeå’ŒQueueæ¥å£ï¼Œæ”¯æŒåœ¨å¤´éƒ¨å’Œå°¾éƒ¨è¿›è¡Œå¿«é€Ÿæ’å…¥å’Œåˆ é™¤æ“ä½œã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<p>éœ€è¦é¢‘ç¹æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„åœºæ™¯ã€‚</p>
<p>éœ€è¦åŒç«¯é˜Ÿåˆ—ï¼ˆDequeï¼‰åŠŸèƒ½çš„åœºæ™¯ï¼Œå¦‚åœ¨å¤´éƒ¨å’Œå°¾éƒ¨è¿›è¡Œæ“ä½œã€‚</p>
<h2 id="PriorityQueue"><a href="#PriorityQueue" class="headerlink" title="PriorityQueue"></a>PriorityQueue</h2><p>åŸºäºä¼˜å…ˆçº§å †ï¼ˆPriority Heapï¼‰å®ç°çš„æ— ç•Œé˜Ÿåˆ—ã€‚å…ƒç´ æŒ‰ç…§è‡ªç„¶é¡ºåºæˆ–æŒ‡å®šçš„æ¯”è¾ƒå™¨é¡ºåºæ’åˆ—ã€‚ä¸å…è®¸æ’å…¥nullå…ƒç´ ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<p>éœ€è¦æŒ‰ä¼˜å…ˆçº§å¤„ç†å…ƒç´ çš„åœºæ™¯ï¼Œå¦‚ä»»åŠ¡è°ƒåº¦ã€äº‹ä»¶å¤„ç†ç­‰ã€‚</p>
<p>éœ€è¦åŠ¨æ€è°ƒæ•´å…ƒç´ é¡ºåºçš„åœºæ™¯ã€‚</p>
<h2 id="ArrayDeque"><a href="#ArrayDeque" class="headerlink" title="ArrayDeque"></a>ArrayDeque</h2><p>åŸºäºæ•°ç»„å®ç°çš„åŒç«¯é˜Ÿåˆ—ï¼ˆDequeï¼‰ï¼Œæ²¡æœ‰å®¹é‡é™åˆ¶ï¼Œå¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œæ¯”LinkedListæ›´é«˜æ•ˆï¼Œå°¤å…¶æ˜¯åœ¨æ ˆå’Œé˜Ÿåˆ—æ“ä½œæ–¹é¢ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<p>éœ€è¦é«˜æ•ˆçš„æ ˆæˆ–é˜Ÿåˆ—æ“ä½œçš„åœºæ™¯ã€‚</p>
<p>éœ€è¦åŒç«¯é˜Ÿåˆ—åŠŸèƒ½ï¼Œä½†ä¸éœ€è¦çº¿ç¨‹å®‰å…¨çš„åœºæ™¯ã€‚</p>
<h2 id="ConcurrentLinkedQueue"><a href="#ConcurrentLinkedQueue" class="headerlink" title="ConcurrentLinkedQueue"></a>ConcurrentLinkedQueue</h2><p>åŸºäºé“¾è¡¨å®ç°çš„æ— ç•Œéé˜»å¡é˜Ÿåˆ—ã€‚ä½¿ç”¨æ— é”ç®—æ³•ï¼Œæä¾›é«˜æ•ˆçš„å¹¶å‘æ€§èƒ½ã€‚çº¿ç¨‹å®‰å…¨ï¼Œé€‚ç”¨äºé«˜å¹¶å‘ç¯å¢ƒã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<p>é«˜å¹¶å‘ç¯å¢ƒä¸‹çš„æ— ç•Œé˜Ÿåˆ—ã€‚</p>
<p>éœ€è¦é«˜æ•ˆçš„éé˜»å¡å¹¶å‘æ“ä½œçš„åœºæ™¯ã€‚</p>
<h2 id="LinkedBlockingQueue"><a href="#LinkedBlockingQueue" class="headerlink" title="LinkedBlockingQueue"></a>LinkedBlockingQueue</h2><p>åŸºäºé“¾è¡¨å®ç°çš„å¯é€‰æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œæ”¯æŒé˜»å¡çš„putå’Œtakeæ“ä½œï¼Œçº¿ç¨‹å®‰å…¨ï¼Œé€‚ç”¨äºç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<p>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦é™åˆ¶é˜Ÿåˆ—å¤§å°çš„åœºæ™¯ã€‚éœ€è¦çº¿ç¨‹å®‰å…¨çš„é˜»å¡é˜Ÿåˆ—ã€‚</p>
<h2 id="ArrayBlockingQueue"><a href="#ArrayBlockingQueue" class="headerlink" title="ArrayBlockingQueue"></a>ArrayBlockingQueue</h2><p>åŸºäºæ•°ç»„å®ç°çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œå¿…é¡»æŒ‡å®šå®¹é‡ï¼Œæ”¯æŒé˜»å¡çš„putå’Œtakeæ“ä½œã€‚çº¿ç¨‹å®‰å…¨ï¼Œé€‚ç”¨äºç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<p>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å›ºå®šå¤§å°çš„é˜Ÿåˆ—æ—¶ã€‚éœ€è¦çº¿ç¨‹å®‰å…¨çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚</p>
<h2 id="DelayQueue"><a href="#DelayQueue" class="headerlink" title="DelayQueue"></a>DelayQueue</h2><p>æ”¯æŒå»¶è¿Ÿå…ƒç´ çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œå…ƒç´ åªæœ‰åœ¨å…¶å»¶è¿Ÿæ—¶é—´åˆ°æœŸåæ‰èƒ½è¢«å–å‡ºã€‚çº¿ç¨‹å®‰å…¨ï¼Œé€‚ç”¨äºå¹¶å‘ç¯å¢ƒã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<p>éœ€è¦å»¶è¿Ÿå¤„ç†å…ƒç´ çš„åœºæ™¯ï¼Œå¦‚ä»»åŠ¡è°ƒåº¦ã€ç¼“å­˜è¿‡æœŸå¤„ç†ç­‰ã€‚</p>
<p>å®šæ—¶ä»»åŠ¡æ‰§è¡Œåœºæ™¯ã€‚</p>
<h2 id="LinkedBlockingDeque"><a href="#LinkedBlockingDeque" class="headerlink" title="LinkedBlockingDeque"></a>LinkedBlockingDeque</h2><p>åŸºäºé“¾è¡¨å®ç°çš„å¯é€‰æœ‰ç•Œé˜»å¡åŒç«¯é˜Ÿåˆ—ï¼Œæ”¯æŒé˜»å¡çš„putå’Œtakeæ“ä½œã€‚çº¿ç¨‹å®‰å…¨ï¼Œé€‚ç”¨äºç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦é™åˆ¶é˜Ÿåˆ—å¤§å°çš„åŒç«¯é˜Ÿåˆ—åœºæ™¯ã€‚éœ€è¦çº¿ç¨‹å®‰å…¨çš„é˜»å¡åŒç«¯é˜Ÿåˆ—ã€‚</p>
<blockquote>
<p>&#x2F;gfv9i9dpcf71awio&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/java8%E7%9A%84hashmap%E5%AE%9E%E7%8E%B0%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/java8%E7%9A%84hashmap%E5%AE%9E%E7%8E%B0%EF%BC%9F/" itemprop="url">java8çš„hashmapå®ç°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘Œjava8çš„hashmapå®ç°ï¼Ÿ"><a href="#ğŸ‘Œjava8çš„hashmapå®ç°ï¼Ÿ" class="headerlink" title="ğŸ‘Œjava8çš„hashmapå®ç°ï¼Ÿ"></a>ğŸ‘Œjava8çš„hashmapå®ç°ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>åœ¨Java 8ä¸­ï¼ŒHashMapçš„å®ç°è¿›è¡Œäº†æ˜¾è‘—çš„ä¼˜åŒ–ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å“ˆå¸Œå†²çªæ–¹é¢ï¼Œå¼•å…¥äº†çº¢é»‘æ ‘æ•°æ®ç»“æ„ã€‚è¿™äº›æ”¹è¿›æ—¨åœ¨æé«˜åœ¨é«˜å†²çªæƒ…å†µä¸‹çš„æ€§èƒ½ã€‚</p>
<h2 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><p>HashMapçš„åº•å±‚ç»“æ„ä»ç„¶æ˜¯åŸºäºæ•°ç»„å’Œé“¾è¡¨çš„ç»„åˆï¼Œä½†åœ¨Java 8ä¸­ï¼Œå½“é“¾è¡¨é•¿åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶ï¼Œä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œä»¥æé«˜æ“ä½œæ•ˆç‡ã€‚</p>
<h2 id="å­˜å‚¨è¿‡ç¨‹"><a href="#å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹"></a>å­˜å‚¨è¿‡ç¨‹</h2><ol>
<li><strong>è®¡ç®—å“ˆå¸Œå€¼</strong>ï¼šé¦–å…ˆï¼Œé€šè¿‡é”®çš„hashCodeæ–¹æ³•è®¡ç®—å“ˆå¸Œå€¼ï¼Œç„¶åå¯¹è¯¥å“ˆå¸Œå€¼è¿›è¡Œæ‰°åŠ¨ï¼Œä»¥å‡å°‘å†²çªã€‚æ‰°åŠ¨çš„ç›®çš„æ˜¯ä¸ºäº†ä½¿å“ˆå¸Œå€¼æ›´åŠ å‡åŒ€åœ°åˆ†å¸ƒåœ¨æ•°ç»„ä¸­ã€‚</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">static final int hash(Object key) &#123;</span><br><span class="line">    int h;</span><br><span class="line">    return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>ç¡®å®šæ•°ç»„ç´¢å¼•</strong>ï¼šé€šè¿‡å“ˆå¸Œå€¼ä¸æ•°ç»„é•¿åº¦çš„å‡ä¸€å€¼è¿›è¡ŒæŒ‰ä½ä¸è¿ç®—ï¼Œè®¡ç®—å‡ºæ•°ç»„çš„ç´¢å¼•ä½ç½®ã€‚</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">static int indexFor(int h, int length) &#123;</span><br><span class="line">    return h &amp; (length - 1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>æ’å…¥èŠ‚ç‚¹</strong>ï¼š</li>
</ol>
<p>å¦‚æœæ•°ç»„ç´¢å¼•ä½ç½®ä¸ºç©ºï¼Œç›´æ¥æ’å…¥æ–°çš„èŠ‚ç‚¹ã€‚</p>
<p>å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™éœ€è¦å¤„ç†å“ˆå¸Œå†²çªã€‚</p>
<h2 id="å¤„ç†å“ˆå¸Œå†²çª"><a href="#å¤„ç†å“ˆå¸Œå†²çª" class="headerlink" title="å¤„ç†å“ˆå¸Œå†²çª"></a>å¤„ç†å“ˆå¸Œå†²çª</h2><p>åœ¨Java 8ä¸­ï¼Œå¤„ç†å“ˆå¸Œå†²çªçš„æ–¹æ³•æœ‰äº†æ˜¾è‘—æ”¹è¿›ï¼š</p>
<ol>
<li><strong>é“¾è¡¨</strong>ï¼šå¦‚æœå†²çªçš„èŠ‚ç‚¹æ•°è¾ƒå°‘ï¼ˆé“¾è¡¨é•¿åº¦å°äºç­‰äº8ï¼‰ï¼Œåˆ™ä½¿ç”¨é“¾è¡¨å­˜å‚¨ã€‚é“¾è¡¨çš„æ’å…¥æ“ä½œåœ¨é“¾è¡¨å°¾éƒ¨è¿›è¡Œï¼Œä»¥ä¿æŒæ’å…¥é¡ºåºã€‚</li>
<li><strong>çº¢é»‘æ ‘</strong>ï¼šå¦‚æœé“¾è¡¨é•¿åº¦è¶…è¿‡8ï¼Œé•¿åº¦å¤§äº 64HashMapä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚çº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå…¶æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ï¼Œç›¸æ¯”é“¾è¡¨çš„O(n)æ›´é«˜æ•ˆã€‚</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st</span><br><span class="line">    treeifyBin(tab, hash);</span><br></pre></td></tr></table></figure>

<h2 id="å–å€¼è¿‡ç¨‹"><a href="#å–å€¼è¿‡ç¨‹" class="headerlink" title="å–å€¼è¿‡ç¨‹"></a>å–å€¼è¿‡ç¨‹</h2><p>åœ¨å–å€¼æ—¶ï¼ŒHashMapä¼šå…ˆè®¡ç®—å“ˆå¸Œå€¼ï¼Œç„¶åæ‰¾åˆ°å¯¹åº”çš„æ•°ç»„ä½ç½®ã€‚å¦‚æœè¯¥ä½ç½®å­˜å‚¨çš„æ˜¯é“¾è¡¨ï¼Œåˆ™éå†é“¾è¡¨æŸ¥æ‰¾ï¼›å¦‚æœæ˜¯çº¢é»‘æ ‘ï¼Œåˆ™åœ¨æ ‘ä¸­æŸ¥æ‰¾ã€‚</p>
<h2 id="æ‰©å®¹"><a href="#æ‰©å®¹" class="headerlink" title="æ‰©å®¹"></a>æ‰©å®¹</h2><p>å½“HashMapä¸­çš„å…ƒç´ æ•°é‡è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼ˆé€šå¸¸æ˜¯æ•°ç»„é•¿åº¦çš„0.75å€ï¼‰æ—¶ï¼Œä¼šè¿›è¡Œæ‰©å®¹ã€‚æ‰©å®¹æ—¶ï¼ŒHashMapä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ã€æ›´å¤§çš„æ•°ç»„ï¼Œå¹¶å°†æ—§æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ é‡æ–°å“ˆå¸Œå¹¶æ”¾å…¥æ–°æ•°ç»„ä¸­ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">void resize(int newCapacity) &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] oldTable = table;</span><br><span class="line">    int oldCapacity = oldTable.length;</span><br><span class="line">    Node&lt;K,V&gt;[] newTable = (Node&lt;K,V&gt;[])new Node[newCapacity];</span><br><span class="line">    // Rehashing elements to new table</span><br><span class="line">    for (int j = 0; j &lt; oldCapacity; ++j) &#123;</span><br><span class="line">        Node&lt;K,V&gt; e;</span><br><span class="line">        if ((e = oldTable[j]) != null) &#123;</span><br><span class="line">            oldTable[j] = null;</span><br><span class="line">            if (e.next == null)</span><br><span class="line">                newTable[e.hash &amp; (newCapacity - 1)] = e;</span><br><span class="line">            else if (e instanceof TreeNode)</span><br><span class="line">                ((TreeNode&lt;K,V&gt;)e).split(this, newTable, j, oldCapacity);</span><br><span class="line">            else &#123; // preserve order</span><br><span class="line">                Node&lt;K,V&gt; loHead = null, loTail = null;</span><br><span class="line">                Node&lt;K,V&gt; hiHead = null, hiTail = null;</span><br><span class="line">                Node&lt;K,V&gt; next;</span><br><span class="line">                do &#123;</span><br><span class="line">                    next = e.next;</span><br><span class="line">                    if ((e.hash &amp; oldCapacity) == 0) &#123;</span><br><span class="line">                        if (loTail == null)</span><br><span class="line">                            loHead = e;</span><br><span class="line">                        else</span><br><span class="line">                            loTail.next = e;</span><br><span class="line">                        loTail = e;</span><br><span class="line">                    &#125;</span><br><span class="line">                    else &#123;</span><br><span class="line">                        if (hiTail == null)</span><br><span class="line">                            hiHead = e;</span><br><span class="line">                        else</span><br><span class="line">                            hiTail.next = e;</span><br><span class="line">                        hiTail = e;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; while ((e = next) != null);</span><br><span class="line">                if (loTail != null) &#123;</span><br><span class="line">                    loTail.next = null;</span><br><span class="line">                    newTable[j] = loHead;</span><br><span class="line">                &#125;</span><br><span class="line">                if (hiTail != null) &#123;</span><br><span class="line">                    hiTail.next = null;</span><br><span class="line">                    newTable[j + oldCapacity] = hiHead;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    table = newTable;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font style="color:rgb(36, 41, 47);">Java 8ä¸­çš„</font>HashMap<font style="color:rgb(36, 41, 47);">é€šè¿‡å¼•å…¥çº¢é»‘æ ‘æ¥ä¼˜åŒ–å“ˆå¸Œå†²çªçš„å¤„ç†ã€‚å½“é“¾è¡¨é•¿åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œä»è€Œåœ¨æç«¯æƒ…å†µä¸‹æé«˜æŸ¥æ‰¾å’Œæ’å…¥çš„æ•ˆç‡ã€‚è¿™äº›æ”¹è¿›ä½¿å¾—</font>HashMap<font style="color:rgb(36, 41, 47);">åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹èƒ½å¤Ÿæä¾›æ›´ç¨³å®šå’Œé«˜æ•ˆçš„æ€§èƒ½ã€‚</font></p>
<blockquote>
<p>&#x2F;uxrna62kfc64guwy&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/jdk7%E7%9A%84ConcurrentHashMap%E5%AE%9E%E7%8E%B0%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/jdk7%E7%9A%84ConcurrentHashMap%E5%AE%9E%E7%8E%B0%EF%BC%9F/" itemprop="url">jdk7çš„ConcurrentHashMapå®ç°ï¼Ÿ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘Œjdk7çš„ConcurrentHashMapå®ç°ï¼Ÿ"><a href="#ğŸ‘Œjdk7çš„ConcurrentHashMapå®ç°ï¼Ÿ" class="headerlink" title="ğŸ‘Œjdk7çš„ConcurrentHashMapå®ç°ï¼Ÿ"></a>ğŸ‘Œjdk7çš„ConcurrentHashMapå®ç°ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>åœ¨JDK 7ä¸­ï¼ŒConcurrentHashMapçš„å®ç°ä¸JDK 8æœ‰æ‰€ä¸åŒã€‚JDK 7ä¸­çš„ConcurrentHashMapä½¿ç”¨äº†åˆ†æ®µé”ï¼ˆSegment Lockingï¼‰æ¥å®ç°é«˜å¹¶å‘æ€§èƒ½ã€‚</p>
<h2 id="ä¸»è¦ç»“æ„"><a href="#ä¸»è¦ç»“æ„" class="headerlink" title="ä¸»è¦ç»“æ„"></a>ä¸»è¦ç»“æ„</h2><p>JDK 7ä¸­çš„ConcurrentHashMapç”±ä»¥ä¸‹å‡ ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li><strong>Segment</strong>ï¼šåˆ†æ®µé”çš„æ ¸å¿ƒï¼Œæ¯ä¸ªSegmentæ˜¯ä¸€ä¸ªå°çš„å“ˆå¸Œè¡¨ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„é”ã€‚</li>
<li><strong>HashEntry</strong>ï¼šå“ˆå¸Œè¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå­˜å‚¨é”®å€¼å¯¹ã€‚</li>
<li><strong>ConcurrentHashMap</strong>ï¼šåŒ…å«å¤šä¸ªSegmentï¼Œæ¯ä¸ªSegmentç®¡ç†ä¸€éƒ¨åˆ†å“ˆå¸Œè¡¨ã€‚</li>
</ol>
<h2 id="Segment-ç±»"><a href="#Segment-ç±»" class="headerlink" title="Segment ç±»"></a>Segment ç±»</h2><p>Segmentç±»æ˜¯ReentrantLockçš„å­ç±»ï¼Œå®ƒæ˜¯ConcurrentHashMapçš„æ ¸å¿ƒéƒ¨åˆ†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">static final class Segment&lt;K,V&gt; extends ReentrantLock implements Serializable &#123;</span><br><span class="line">    transient volatile HashEntry&lt;K,V&gt;[] table;</span><br><span class="line">    transient int count;</span><br><span class="line">    transient int modCount;</span><br><span class="line">    transient int threshold;</span><br><span class="line">    final float loadFactor;</span><br><span class="line"></span><br><span class="line">    Segment(float lf, int threshold, HashEntry&lt;K,V&gt;[] tab) &#123;</span><br><span class="line">        this.loadFactor = lf;</span><br><span class="line">        this.threshold = threshold;</span><br><span class="line">        this.table = tab;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="HashEntry-ç±»"><a href="#HashEntry-ç±»" class="headerlink" title="HashEntry ç±»"></a>HashEntry ç±»</h2><p>HashEntryç±»æ˜¯å“ˆå¸Œè¡¨ä¸­çš„èŠ‚ç‚¹ï¼Œå­˜å‚¨é”®å€¼å¯¹å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">static final class HashEntry&lt;K,V&gt; &#123;</span><br><span class="line">    final K key;</span><br><span class="line">    final int hash;</span><br><span class="line">    volatile V value;</span><br><span class="line">    volatile HashEntry&lt;K,V&gt; next;</span><br><span class="line"></span><br><span class="line">    HashEntry(K key, int hash, HashEntry&lt;K,V&gt; next, V value) &#123;</span><br><span class="line">        this.key = key;</span><br><span class="line">        this.hash = hash;</span><br><span class="line">        this.next = next;</span><br><span class="line">        this.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ConcurrentHashMap-ç±»"><a href="#ConcurrentHashMap-ç±»" class="headerlink" title="ConcurrentHashMap ç±»"></a>ConcurrentHashMap ç±»</h2><p>ConcurrentHashMapç±»åŒ…å«å¤šä¸ªSegmentï¼Œæ¯ä¸ªSegmentç®¡ç†ä¸€éƒ¨åˆ†å“ˆå¸Œè¡¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class ConcurrentHashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt;</span><br><span class="line">    implements ConcurrentMap&lt;K,V&gt;, Serializable &#123;</span><br><span class="line"></span><br><span class="line">    final Segment&lt;K,V&gt;[] segments;</span><br><span class="line">    transient Set&lt;K&gt; keySet;</span><br><span class="line">    transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;</span><br><span class="line">    transient Collection&lt;V&gt; values;</span><br><span class="line">    static final int DEFAULT_INITIAL_CAPACITY = 16;</span><br><span class="line">    static final float DEFAULT_LOAD_FACTOR = 0.75f;</span><br><span class="line">    static final int DEFAULT_CONCURRENCY_LEVEL = 16;</span><br><span class="line">    static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;</span><br><span class="line">    static final int MIN_SEGMENT_TABLE_CAPACITY = 2;</span><br><span class="line">    static final int MAX_SEGMENTS = 1 &lt;&lt; 16; // slightly conservative</span><br><span class="line"></span><br><span class="line">    // Other fields and methods...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="put-æ“ä½œ"><a href="#put-æ“ä½œ" class="headerlink" title="put æ“ä½œ"></a>put æ“ä½œ</h2><p>putæ“ä½œæ˜¯ConcurrentHashMapçš„æ ¸å¿ƒæ“ä½œä¹‹ä¸€ï¼Œä»¥ä¸‹æ˜¯å…¶ç®€åŒ–ç‰ˆå®ç°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">public V put(K key, V value) &#123;</span><br><span class="line">    Segment&lt;K,V&gt; s;</span><br><span class="line">    if (value == null)</span><br><span class="line">        throw new NullPointerException();</span><br><span class="line">    int hash = hash(key);</span><br><span class="line">    int j = (hash &gt;&gt;&gt; segmentShift) &amp; segmentMask;</span><br><span class="line">    if ((s = (Segment&lt;K,V&gt;)UNSAFE.getObject          // nonvolatile; recheck</span><br><span class="line">         (segments, (j &lt;&lt; SSHIFT) + SBASE)) == null) // in ensureSegment</span><br><span class="line">        s = ensureSegment(j);</span><br><span class="line">    return s.put(key, hash, value, false);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">final V put(K key, int hash, V value, boolean onlyIfAbsent) &#123;</span><br><span class="line">    HashEntry&lt;K,V&gt; node = tryLock() ? null : scanAndLockForPut(key, hash, value);</span><br><span class="line">    V oldValue;</span><br><span class="line">    try &#123;</span><br><span class="line">        HashEntry&lt;K,V&gt;[] tab = table;</span><br><span class="line">        int index = (tab.length - 1) &amp; hash;</span><br><span class="line">        HashEntry&lt;K,V&gt; first = entryAt(tab, index);</span><br><span class="line">        for (HashEntry&lt;K,V&gt; e = first;;) &#123;</span><br><span class="line">            if (e != null) &#123;</span><br><span class="line">                K k;</span><br><span class="line">                if ((k = e.key) == key || (e.hash == hash &amp;&amp; key.equals(k))) &#123;</span><br><span class="line">                    oldValue = e.value;</span><br><span class="line">                    if (!onlyIfAbsent) &#123;</span><br><span class="line">                        e.value = value;</span><br><span class="line">                        ++modCount;</span><br><span class="line">                    &#125;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">                e = e.next;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                if (node != null)</span><br><span class="line">                    node.setNext(first);</span><br><span class="line">                else</span><br><span class="line">                    node = new HashEntry&lt;K,V&gt;(key, hash, first, value);</span><br><span class="line">                int c = count + 1;</span><br><span class="line">                if (c &gt; threshold &amp;&amp; tab.length &lt; MAXIMUM_CAPACITY)</span><br><span class="line">                    rehash(node);</span><br><span class="line">                else</span><br><span class="line">                    setEntryAt(tab, index, node);</span><br><span class="line">                ++modCount;</span><br><span class="line">                count = c;</span><br><span class="line">                oldValue = null;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        unlock();</span><br><span class="line">    &#125;</span><br><span class="line">    return oldValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="get-æ“ä½œ"><a href="#get-æ“ä½œ" class="headerlink" title="get æ“ä½œ"></a>get æ“ä½œ</h2><p>getæ“ä½œæ˜¯ConcurrentHashMapçš„å¦ä¸€ä¸ªæ ¸å¿ƒæ“ä½œï¼Œä»¥ä¸‹æ˜¯å…¶ç®€åŒ–ç‰ˆå®ç°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public V get(Object key) &#123;</span><br><span class="line">    Segment&lt;K,V&gt; s;</span><br><span class="line">    HashEntry&lt;K,V&gt;[] tab;</span><br><span class="line">    int h = hash(key);</span><br><span class="line">    long u = (((h &gt;&gt;&gt; segmentShift) &amp; segmentMask) &lt;&lt; SSHIFT) + SBASE;</span><br><span class="line">    if ((s = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(segments, u)) != null &amp;&amp;</span><br><span class="line">        (tab = s.table) != null) &#123;</span><br><span class="line">        for (HashEntry&lt;K,V&gt; e = (HashEntry&lt;K,V&gt;) UNSAFE.getObjectVolatile</span><br><span class="line">                 (tab, ((long)(((tab.length - 1) &amp; h)) &lt;&lt; TSHIFT) + TBASE);</span><br><span class="line">             e != null; e = e.next) &#123;</span><br><span class="line">            K k;</span><br><span class="line">            if ((k = e.key) == key || (e.hash == h &amp;&amp; key.equals(k)))</span><br><span class="line">                return e.value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸»è¦ç‰¹ç‚¹"><a href="#ä¸»è¦ç‰¹ç‚¹" class="headerlink" title="ä¸»è¦ç‰¹ç‚¹"></a>ä¸»è¦ç‰¹ç‚¹</h2><ol>
<li><strong>åˆ†æ®µé”</strong>ï¼šConcurrentHashMapå°†æ•´ä¸ªå“ˆå¸Œè¡¨åˆ†æˆå¤šä¸ªSegmentï¼Œæ¯ä¸ªSegmentæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å°å“ˆå¸Œè¡¨ï¼Œæ‹¥æœ‰è‡ªå·±çš„é”ã€‚è¿™æ ·ä¸åŒçš„çº¿ç¨‹å¯ä»¥å¹¶å‘åœ°è®¿é—®ä¸åŒçš„Segmentï¼Œæ˜¾è‘—æé«˜å¹¶å‘æ€§èƒ½ã€‚</li>
<li><strong>é«˜æ•ˆå¹¶å‘</strong>ï¼šé€šè¿‡ç»†ç²’åº¦çš„é”æœºåˆ¶ï¼ŒConcurrentHashMapåœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹è¡¨ç°å‡ºè‰²ï¼Œé¿å…äº†å…¨è¡¨é”çš„æ€§èƒ½ç“¶é¢ˆã€‚</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šæ‰€æœ‰çš„æ“ä½œéƒ½åœ¨é”çš„ä¿æŠ¤ä¸‹è¿›è¡Œï¼Œç¡®ä¿äº†çº¿ç¨‹å®‰å…¨æ€§ã€‚</li>
</ol>
<p>JDK 7ä¸­çš„ConcurrentHashMapé€šè¿‡åˆ†æ®µé”æœºåˆ¶å®ç°é«˜å¹¶å‘æ€§èƒ½ã€‚æ¯ä¸ªSegmentæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å°å“ˆå¸Œè¡¨ï¼Œæ‹¥æœ‰è‡ªå·±çš„é”ï¼Œå…è®¸å¤šä¸ªçº¿ç¨‹å¹¶å‘åœ°è®¿é—®ä¸åŒçš„Segmentã€‚è¿™ç§è®¾è®¡åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹æ˜¾è‘—æé«˜äº†æ€§èƒ½ï¼ŒåŒæ—¶ä¿è¯äº†çº¿ç¨‹å®‰å…¨æ€§ã€‚</p>
<blockquote>
<p>&#x2F;krsz9bcuq049gs4t&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/jdk7%E7%9A%84hashmap%E5%AE%9E%E7%8E%B0%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/jdk7%E7%9A%84hashmap%E5%AE%9E%E7%8E%B0%EF%BC%9F/" itemprop="url">jdk7çš„hashmapå®ç°ï¼Ÿ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘Œjdk7çš„hashmapå®ç°ï¼Ÿ"><a href="#ğŸ‘Œjdk7çš„hashmapå®ç°ï¼Ÿ" class="headerlink" title="ğŸ‘Œjdk7çš„hashmapå®ç°ï¼Ÿ"></a>ğŸ‘Œjdk7çš„hashmapå®ç°ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>HashMapåœ¨ JDK 7 ä¸­çš„å®ç°å…¶å®å¹¶ä¸å¤æ‚ï¼Œå®ƒä¸»è¦ä¾é ä¸¤ä¸ªæ•°æ®ç»“æ„ï¼šæ•°ç»„å’Œé“¾è¡¨ã€‚</p>
<p>é¦–å…ˆï¼ŒHashMapå†…éƒ¨æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„ç”¨æ¥å­˜å‚¨æ‰€æœ‰çš„é”®å€¼å¯¹ã€‚æ¯ä¸ªæ•°ç»„çš„å…ƒç´ å…¶å®æ˜¯ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸¤ä¸ªæˆ–å¤šä¸ªé”®è®¡ç®—å‡ºæ¥çš„å“ˆå¸Œå€¼ç›¸åŒï¼Œå®ƒä»¬ä¼šè¢«å­˜å‚¨åœ¨åŒä¸€ä¸ªæ•°ç»„ä½ç½®çš„é“¾è¡¨ä¸­ã€‚</p>
<p>å½“æˆ‘ä»¬å¾€HashMapé‡Œæ”¾ä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼ŒHashMapä¼šå…ˆæ ¹æ®é”®çš„hashCodeè®¡ç®—å‡ºä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œç„¶åç”¨è¿™ä¸ªå“ˆå¸Œå€¼å†³å®šé”®å€¼å¯¹åº”è¯¥æ”¾åœ¨æ•°ç»„çš„å“ªä¸ªä½ç½®ã€‚å¦‚æœé‚£ä¸ªä½ç½®æ˜¯ç©ºçš„ï¼Œé”®å€¼å¯¹å°±ç›´æ¥æ”¾è¿›å»ï¼›å¦‚æœé‚£ä¸ªä½ç½®å·²ç»æœ‰å…¶ä»–é”®å€¼å¯¹äº†ï¼ˆä¹Ÿå°±æ˜¯å‘ç”Ÿäº†å“ˆå¸Œå†²çªï¼‰ï¼ŒHashMapä¼šæŠŠæ–°çš„é”®å€¼å¯¹æ”¾åˆ°é‚£ä¸ªä½ç½®çš„é“¾è¡¨ä¸Šã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­å§ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªHashMapï¼Œæˆ‘ä»¬è¦å¾€é‡Œé¢æ”¾ä¸€ä¸ªé”®å€¼å¯¹(â€œappleâ€, 1)ã€‚HashMapä¼šå…ˆè®¡ç®—â€appleâ€çš„å“ˆå¸Œå€¼ï¼Œç„¶åç”¨è¿™ä¸ªå“ˆå¸Œå€¼å†³å®šåº”è¯¥æŠŠå®ƒæ”¾åˆ°æ•°ç»„çš„å“ªä¸ªä½ç½®ã€‚å‡å¦‚è®¡ç®—å‡ºæ¥çš„ä½ç½®æ˜¯ 5ï¼Œå¦‚æœæ•°ç»„çš„ç¬¬ 5 ä¸ªä½ç½®æ˜¯ç©ºçš„ï¼Œå®ƒå°±ç›´æ¥æ”¾è¿›å»ï¼›å¦‚æœå·²ç»æœ‰å…¶ä»–é”®å€¼å¯¹äº†ï¼Œæ¯”å¦‚(â€œbananaâ€, 2)ï¼Œå®ƒå°±ä¼šæŠŠ(â€œappleâ€, 1)åŠ åˆ°(â€œbananaâ€, 2)çš„é“¾è¡¨ä¸Šã€‚</p>
<p>å–å€¼çš„æ—¶å€™ä¹Ÿç±»ä¼¼ã€‚å‡è®¾æˆ‘ä»¬è¦å–â€appleâ€å¯¹åº”çš„å€¼ï¼ŒHashMapä¼šå…ˆè®¡ç®—â€appleâ€çš„å“ˆå¸Œå€¼ï¼Œç„¶åæ‰¾åˆ°æ•°ç»„çš„å¯¹åº”ä½ç½®ï¼Œå†æ²¿ç€é“¾è¡¨æ‰¾åˆ°â€appleâ€å¯¹åº”çš„èŠ‚ç‚¹ï¼Œæœ€åè¿”å›å®ƒçš„å€¼ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒHashMapä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹HashMapï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ï¼Œæ¯”å¦‚æ­»å¾ªç¯ã€‚æ‰€ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå»ºè®®ä½¿ç”¨ConcurrentHashMapã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼ŒHashMapåœ¨ JDK 7 ä¸­ä¸»è¦æ˜¯é€šè¿‡æ•°ç»„å’Œé“¾è¡¨æ¥å­˜å‚¨æ•°æ®ï¼Œä½¿ç”¨å“ˆå¸Œå€¼æ¥å†³å®šå­˜å‚¨ä½ç½®ï¼Œå¹¶é€šè¿‡é“¾è¡¨æ¥è§£å†³å“ˆå¸Œå†²çªã€‚å®ƒçš„è®¾è®¡è®©æˆ‘ä»¬åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹èƒ½å¤Ÿå¿«é€Ÿåœ°å­˜å–æ•°æ®ï¼Œä½†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è¦å°å¿ƒä½¿ç”¨ã€‚</p>
<p>JDK 7 ä¸­çš„HashMapåº•å±‚å®ç°æ–¹å¼ä¸»è¦åŸºäºæ•°ç»„å’Œé“¾è¡¨ã€‚å®ƒé€šè¿‡å“ˆå¸Œå‡½æ•°å°†é”®æ˜ å°„åˆ°æ•°ç»„ä¸­çš„ç´¢å¼•ä½ç½®ï¼Œä»è€Œå®ç°å¿«é€Ÿçš„æŸ¥æ‰¾å’Œå­˜å‚¨æ“ä½œã€‚</p>
<h2 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><p>HashMapä¸»è¦ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š</p>
<p><strong>æ•°ç»„ï¼ˆtableï¼‰</strong>ï¼šå­˜å‚¨HashMapçš„æ ¸å¿ƒæ•°æ®ç»“æ„ã€‚æ¯ä¸ªæ•°ç»„å…ƒç´ æ˜¯ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚</p>
<p><strong>é“¾è¡¨ï¼ˆEntryï¼‰</strong>ï¼šå¤„ç†å“ˆå¸Œå†²çªçš„ç»“æ„ã€‚å½“å¤šä¸ªé”®çš„å“ˆå¸Œå€¼æ˜ å°„åˆ°åŒä¸€ä¸ªæ•°ç»„ç´¢å¼•æ—¶ï¼Œè¿™äº›é”®å€¼å¯¹ä¼šè¢«å­˜å‚¨åœ¨è¯¥ç´¢å¼•ä½ç½®çš„é“¾è¡¨ä¸­ã€‚</p>
<h2 id="Entry-ç±»"><a href="#Entry-ç±»" class="headerlink" title="Entry ç±»"></a>Entry ç±»</h2><p>åœ¨ JDK 7 ä¸­ï¼ŒHashMapä½¿ç”¨ä¸€ä¸ªå†…éƒ¨ç±»Entryæ¥è¡¨ç¤ºé”®å€¼å¯¹ã€‚Entryç±»çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">static class Entry&lt;K, V&gt; implements Map.Entry&lt;K, V&gt; &#123;</span><br><span class="line">    final K key;</span><br><span class="line">    V value;</span><br><span class="line">    Entry&lt;K, V&gt; next;</span><br><span class="line">    final int hash;</span><br><span class="line"></span><br><span class="line">    Entry(int h, K k, V v, Entry&lt;K, V&gt; n) &#123;</span><br><span class="line">        value = v;</span><br><span class="line">        next = n;</span><br><span class="line">        key = k;</span><br><span class="line">        hash = h;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public final K getKey() &#123;</span><br><span class="line">        return key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public final V getValue() &#123;</span><br><span class="line">        return value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public final V setValue(V newValue) &#123;</span><br><span class="line">        V oldValue = value;</span><br><span class="line">        value = newValue;</span><br><span class="line">        return oldValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public final boolean equals(Object o) &#123;</span><br><span class="line">        if (!(o instanceof Map.Entry))</span><br><span class="line">            return false;</span><br><span class="line">        Map.Entry e = (Map.Entry) o;</span><br><span class="line">        Object k1 = getKey();</span><br><span class="line">        Object k2 = e.getKey();</span><br><span class="line">        if (k1 == k2 || (k1 != null &amp;&amp; k1.equals(k2))) &#123;</span><br><span class="line">            Object v1 = getValue();</span><br><span class="line">            Object v2 = e.getValue();</span><br><span class="line">            if (v1 == v2 || (v1 != null &amp;&amp; v1.equals(v2)))</span><br><span class="line">                return true;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public final int hashCode() &#123;</span><br><span class="line">        return (key == null ? 0 : key.hashCode()) ^</span><br><span class="line">               (value == null ? 0 : value.hashCode());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public final String toString() &#123;</span><br><span class="line">        return getKey() + &quot;=&quot; + getValue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å­˜å‚¨è¿‡ç¨‹"><a href="#å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹"></a>å­˜å‚¨è¿‡ç¨‹</h2><p>å½“å‘HashMapä¸­å­˜å‚¨ä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>è®¡ç®—å“ˆå¸Œå€¼</strong>ï¼šé€šè¿‡é”®çš„hashCode()æ–¹æ³•è®¡ç®—å“ˆå¸Œå€¼ï¼Œå¹¶è¿›ä¸€æ­¥å¤„ç†ä»¥å‡å°‘å†²çªã€‚</li>
<li><strong>ç¡®å®šæ•°ç»„ç´¢å¼•</strong>ï¼šé€šè¿‡å“ˆå¸Œå€¼è®¡ç®—æ•°ç»„ç´¢å¼•ä½ç½®ã€‚</li>
<li><strong>æ’å…¥èŠ‚ç‚¹</strong>ï¼šå¦‚æœæ•°ç»„ç´¢å¼•ä½ç½®ä¸ºç©ºï¼Œåˆ™ç›´æ¥æ’å…¥ã€‚å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™éœ€è¦å¤„ç†å“ˆå¸Œå†²çªã€‚</li>
</ol>
<h2 id="å¤„ç†å“ˆå¸Œå†²çª"><a href="#å¤„ç†å“ˆå¸Œå†²çª" class="headerlink" title="å¤„ç†å“ˆå¸Œå†²çª"></a>å¤„ç†å“ˆå¸Œå†²çª</h2><p>åœ¨ JDK 7 ä¸­ï¼ŒHashMapé€šè¿‡é“¾è¡¨æ³•å¤„ç†å“ˆå¸Œå†²çªã€‚å½“å¤šä¸ªé”®çš„å“ˆå¸Œå€¼æ˜ å°„åˆ°åŒä¸€ä¸ªæ•°ç»„ç´¢å¼•æ—¶ï¼Œè¿™äº›é”®å€¼å¯¹ä¼šè¢«å­˜å‚¨åœ¨è¯¥ç´¢å¼•ä½ç½®çš„é“¾è¡¨ä¸­ã€‚æ’å…¥æ—¶ï¼Œæ–°èŠ‚ç‚¹ä¼šè¢«æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨ã€‚</p>
<h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><p>ä»¥ä¸‹æ˜¯putæ–¹æ³•çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œå±•ç¤ºäº†HashMapçš„å­˜å‚¨è¿‡ç¨‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">public V put(K key, V value) &#123;</span><br><span class="line">    if (key == null)</span><br><span class="line">        return putForNullKey(value);</span><br><span class="line">    int hash = hash(key.hashCode());</span><br><span class="line">    int i = indexFor(hash, table.length);</span><br><span class="line">    for (Entry&lt;K, V&gt; e = table[i]; e != null; e = e.next) &#123;</span><br><span class="line">        Object k;</span><br><span class="line">        if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123;</span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            e.value = value;</span><br><span class="line">            e.recordAccess(this);</span><br><span class="line">            return oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modCount++;</span><br><span class="line">    addEntry(hash, key, value, i);</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void addEntry(int hash, K key, V value, int bucketIndex) &#123;</span><br><span class="line">    if ((size &gt;= threshold) &amp;&amp; (null != table[bucketIndex])) &#123;</span><br><span class="line">        resize(2 * table.length);</span><br><span class="line">        hash = (null != key) ? hash(key.hashCode()) : 0;</span><br><span class="line">        bucketIndex = indexFor(hash, table.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createEntry(hash, key, value, bucketIndex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void createEntry(int hash, K key, V value, int bucketIndex) &#123;</span><br><span class="line">    Entry&lt;K, V&gt; e = table[bucketIndex];</span><br><span class="line">    table[bucketIndex] = new Entry&lt;&gt;(hash, key, value, e);</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å–å€¼è¿‡ç¨‹"><a href="#å–å€¼è¿‡ç¨‹" class="headerlink" title="å–å€¼è¿‡ç¨‹"></a>å–å€¼è¿‡ç¨‹</h2><p>å–å€¼æ—¶ï¼Œé€šè¿‡é”®è®¡ç®—å“ˆå¸Œå€¼å’Œæ•°ç»„ç´¢å¼•ï¼Œç„¶ååœ¨é“¾è¡¨ä¸­æŸ¥æ‰¾å¯¹åº”çš„é”®å€¼å¯¹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public V get(Object key) &#123;</span><br><span class="line">    if (key == null)</span><br><span class="line">        return getForNullKey();</span><br><span class="line">    int hash = hash(key.hashCode());</span><br><span class="line">    for (Entry&lt;K, V&gt; e = table[indexFor(hash, table.length)];</span><br><span class="line">         e != null;</span><br><span class="line">         e = e.next) &#123;</span><br><span class="line">        Object k;</span><br><span class="line">        if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k)))</span><br><span class="line">            return e.value;</span><br><span class="line">    &#125;</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<blockquote>
<p>&#x2F;yafahumkqtgcnav4&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/jdk8%E7%9A%84hashmap%E7%9A%84put%E8%BF%87%E7%A8%8B%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/jdk8%E7%9A%84hashmap%E7%9A%84put%E8%BF%87%E7%A8%8B%EF%BC%9F/" itemprop="url">jdk8çš„hashmapçš„putè¿‡ç¨‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘Œjdk8çš„hashmapçš„putè¿‡ç¨‹ï¼Ÿ"><a href="#ğŸ‘Œjdk8çš„hashmapçš„putè¿‡ç¨‹ï¼Ÿ" class="headerlink" title="ğŸ‘Œjdk8çš„hashmapçš„putè¿‡ç¨‹ï¼Ÿ"></a>ğŸ‘Œjdk8çš„hashmapçš„putè¿‡ç¨‹ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><h2 id="putæ–¹æ³•çš„å®ç°"><a href="#putæ–¹æ³•çš„å®ç°" class="headerlink" title="putæ–¹æ³•çš„å®ç°"></a>putæ–¹æ³•çš„å®ç°</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public V put(K key, V value) &#123;</span><br><span class="line">    return putVal(hash(key), key, value, false, true);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>putæ–¹æ³•è°ƒç”¨äº†putValæ–¹æ³•ã€‚è¿™é‡Œçš„hash(key)æ˜¯è®¡ç®—é”®çš„å“ˆå¸Œå€¼ã€‚</p>
<h2 id="è®¡ç®—å“ˆå¸Œå€¼"><a href="#è®¡ç®—å“ˆå¸Œå€¼" class="headerlink" title="è®¡ç®—å“ˆå¸Œå€¼"></a>è®¡ç®—å“ˆå¸Œå€¼</h2><p>hashæ–¹æ³•ç”¨äºè®¡ç®—é”®çš„å“ˆå¸Œå€¼å¹¶è¿›è¡Œæ‰°åŠ¨å¤„ç†ï¼Œä»¥å‡å°‘å†²çªã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">static final int hash(Object key) &#123;</span><br><span class="line">    int h;</span><br><span class="line">    return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="putValæ–¹æ³•çš„å®ç°"><a href="#putValæ–¹æ³•çš„å®ç°" class="headerlink" title="putValæ–¹æ³•çš„å®ç°"></a>putValæ–¹æ³•çš„å®ç°</h2><p>putValæ–¹æ³•æ˜¯HashMapä¸­å®é™…æ‰§è¡Œæ’å…¥æ“ä½œçš„æ ¸å¿ƒæ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;</span><br><span class="line">    if ((tab = table) == null || (n = tab.length) == 0)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    if ((p = tab[i = (n - 1) &amp; hash]) == null)</span><br><span class="line">        tab[i] = newNode(hash, key, value, null);</span><br><span class="line">    else &#123;</span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        if (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">            e = p;</span><br><span class="line">        else if (p instanceof TreeNode)</span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);</span><br><span class="line">        else &#123;</span><br><span class="line">            for (int binCount = 0; ; ++binCount) &#123;</span><br><span class="line">                if ((e = p.next) == null) &#123;</span><br><span class="line">                    p.next = newNode(hash, key, value, null);</span><br><span class="line">                    if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st</span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">                if (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">                    break;</span><br><span class="line">                p = e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (e != null) &#123; // existing mapping for key</span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            if (!onlyIfAbsent || oldValue == null)</span><br><span class="line">                e.value = value;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            return oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ++modCount;</span><br><span class="line">    if (++size &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    afterNodeInsertion(evict);</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è¯¦ç»†æ­¥éª¤è§£æ"><a href="#è¯¦ç»†æ­¥éª¤è§£æ" class="headerlink" title="è¯¦ç»†æ­¥éª¤è§£æ"></a>è¯¦ç»†æ­¥éª¤è§£æ</h2><ol>
<li><strong>åˆå§‹åŒ–è¡¨</strong>ï¼šå¦‚æœå“ˆå¸Œè¡¨è¿˜æ²¡æœ‰åˆå§‹åŒ–æˆ–é•¿åº¦ä¸º0ï¼Œåˆ™è¿›è¡Œåˆå§‹åŒ–ï¼ˆæ‰©å®¹ï¼‰ã€‚</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if ((tab = table) == null || (n = tab.length) == 0)</span><br><span class="line">    n = (tab = resize()).length;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>è®¡ç®—ç´¢å¼•</strong>ï¼šé€šè¿‡å“ˆå¸Œå€¼å’Œæ•°ç»„é•¿åº¦è®¡ç®—å‡ºç´¢å¼•ä½ç½®ã€‚</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if ((p = tab[i = (n - 1) &amp; hash]) == null)</span><br><span class="line">    tab[i] = newNode(hash, key, value, null);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>æ’å…¥æ–°èŠ‚ç‚¹</strong>ï¼šå¦‚æœç´¢å¼•ä½ç½®ä¸ºç©ºï¼Œç›´æ¥æ’å…¥æ–°èŠ‚ç‚¹ã€‚</li>
<li><strong>å¤„ç†å“ˆå¸Œå†²çª</strong>ï¼šå¦‚æœç´¢å¼•ä½ç½®ä¸ä¸ºç©ºï¼Œéœ€è¦å¤„ç†å†²çªã€‚</li>
</ol>
<p><strong>æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç›¸åŒçš„é”®</strong>ï¼šå¦‚æœæ‰¾åˆ°ç›¸åŒçš„é”®ï¼Œæ›¿æ¢å…¶å€¼ã€‚</p>
<p><strong>çº¢é»‘æ ‘å¤„ç†</strong>ï¼šå¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯çº¢é»‘æ ‘èŠ‚ç‚¹ï¼Œåˆ™è°ƒç”¨putTreeValæ–¹æ³•æ’å…¥ã€‚</p>
<p><strong>é“¾è¡¨å¤„ç†</strong>ï¼šå¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯é“¾è¡¨èŠ‚ç‚¹ï¼Œéå†é“¾è¡¨æ’å…¥æ–°èŠ‚ç‚¹ã€‚</p>
<ol start="5">
<li><strong>è½¬æ¢ä¸ºçº¢é»‘æ ‘</strong>ï¼šå¦‚æœé“¾è¡¨é•¿åº¦è¶…è¿‡é˜ˆå€¼ï¼ˆ8ï¼‰ä¸”æ•°ç»„é•¿åº¦å¤§äº 64ï¼Œåˆ™å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st</span><br><span class="line">    treeifyBin(tab, hash);</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><strong>æ›´æ–°èŠ‚ç‚¹å€¼</strong>ï¼šå¦‚æœå­˜åœ¨ç›¸åŒçš„é”®ï¼Œæ›´æ–°å…¶å€¼ã€‚</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if (e != null) &#123; // existing mapping for key</span><br><span class="line">    VoldValue= e.value;</span><br><span class="line">    if (!onlyIfAbsent || oldValue == null)</span><br><span class="line">        e.value = value;</span><br><span class="line">    afterNodeAccess(e);</span><br><span class="line">    return oldValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="7">
<li><strong>è°ƒæ•´å¤§å°</strong>ï¼šæ’å…¥æ–°èŠ‚ç‚¹åï¼Œå¢åŠ å…ƒç´ æ•°é‡ã€‚å¦‚æœè¶…è¿‡é˜ˆå€¼ï¼Œåˆ™è¿›è¡Œæ‰©å®¹ã€‚</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">++modCount;if (++size &gt; threshold)</span><br><span class="line">    resize();</span><br></pre></td></tr></table></figure>

<ol start="8">
<li><strong>æ’å…¥åçš„å¤„ç†</strong>ï¼šè¿›è¡Œä¸€äº›æ’å…¥åçš„å¤„ç†æ“ä½œã€‚</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">afterNodeInsertion(evict);</span><br></pre></td></tr></table></figure>



<blockquote>
<p>&#x2F;cvh030rky8ki5bhi&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/linkedHashMap%E4%B8%BA%E4%BB%80%E4%B9%88%E8%83%BD%E7%94%A8%E6%9D%A5%E5%81%9ALRUCache%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/linkedHashMap%E4%B8%BA%E4%BB%80%E4%B9%88%E8%83%BD%E7%94%A8%E6%9D%A5%E5%81%9ALRUCache%EF%BC%9F/" itemprop="url">linkedHashMapä¸ºä»€ä¹ˆèƒ½ç”¨æ¥åšLRUCache</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘ŒlinkedHashMapä¸ºä»€ä¹ˆèƒ½ç”¨æ¥åšLRUCacheï¼Ÿ"><a href="#ğŸ‘ŒlinkedHashMapä¸ºä»€ä¹ˆèƒ½ç”¨æ¥åšLRUCacheï¼Ÿ" class="headerlink" title="ğŸ‘ŒlinkedHashMapä¸ºä»€ä¹ˆèƒ½ç”¨æ¥åšLRUCacheï¼Ÿ"></a>ğŸ‘ŒlinkedHashMapä¸ºä»€ä¹ˆèƒ½ç”¨æ¥åšLRUCacheï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>LinkedHashMap èƒ½ç”¨æ¥åš LRU ç¼“å­˜çš„å…³é”®åŸå› åœ¨äºå®ƒå¯ä»¥ç»´æŠ¤è®¿é—®é¡ºåºï¼Œå¹¶ä¸”é€šè¿‡é‡å†™removeEldestEntryæ–¹æ³•ï¼Œå¯ä»¥è½»æ¾å®ç°ç¼“å­˜çš„è‡ªåŠ¨æ¸…ç†ã€‚</p>
<h2 id="å…³é”®ç‰¹æ€§"><a href="#å…³é”®ç‰¹æ€§" class="headerlink" title="å…³é”®ç‰¹æ€§"></a>å…³é”®ç‰¹æ€§</h2><p><strong>è®¿é—®é¡ºåº</strong>ï¼šLinkedHashMapæä¾›äº†ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®šæ˜¯å¦æŒ‰ç…§è®¿é—®é¡ºåºæ¥ç»´æŠ¤é”®å€¼å¯¹çš„é¡ºåºã€‚å½“accessOrderå‚æ•°è®¾ç½®ä¸ºtrueæ—¶ï¼ŒLinkedHashMapå°†æ ¹æ®æ¯æ¬¡è®¿é—®ï¼ˆgetæˆ–putæ“ä½œï¼‰æ¥è°ƒæ•´é¡ºåºï¼ŒæŠŠæœ€è¿‘è®¿é—®çš„é”®å€¼å¯¹ç§»åˆ°é“¾è¡¨çš„æœ«å°¾ã€‚</p>
<p><strong>è‡ªåŠ¨æ¸…ç†</strong>ï¼šé€šè¿‡é‡å†™removeEldestEntryæ–¹æ³•ï¼Œå¯ä»¥åœ¨æ’å…¥æ–°é”®å€¼å¯¹æ—¶è‡ªåŠ¨ç§»é™¤æœ€è€çš„é”®å€¼å¯¹ï¼ˆå³é“¾è¡¨å¤´éƒ¨çš„é”®å€¼å¯¹ï¼‰ï¼Œä»è€Œå®ç°ç¼“å­˜çš„è‡ªåŠ¨æ¸…ç†ã€‚</p>
<h2 id="å®ç°-LRU-ç¼“å­˜çš„æ­¥éª¤"><a href="#å®ç°-LRU-ç¼“å­˜çš„æ­¥éª¤" class="headerlink" title="å®ç° LRU ç¼“å­˜çš„æ­¥éª¤"></a>å®ç° LRU ç¼“å­˜çš„æ­¥éª¤</h2><ol>
<li>åˆ›å»ºä¸€ä¸ªLinkedHashMapå®ä¾‹ï¼Œå¹¶å°†accessOrderå‚æ•°è®¾ç½®ä¸ºtrueã€‚</li>
<li>é‡å†™removeEldestEntryæ–¹æ³•ï¼Œä»¥ä¾¿åœ¨ç¼“å­˜å¤§å°è¶…è¿‡é¢„å®šä¹‰çš„æœ€å¤§å®¹é‡æ—¶è‡ªåŠ¨ç§»é™¤æœ€è€çš„é”®å€¼å¯¹ã€‚</li>
</ol>
<h2 id="ä»£ç -Demo"><a href="#ä»£ç -Demo" class="headerlink" title="ä»£ç  Demo"></a>ä»£ç  Demo</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import java.util.LinkedHashMap;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">public class LRUCache&lt;K, V&gt; extends LinkedHashMap&lt;K, V&gt; &#123;</span><br><span class="line">    private final int maxCapacity;</span><br><span class="line"></span><br><span class="line">    // æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–æœ€å¤§å®¹é‡å’Œè®¿é—®é¡ºåº</span><br><span class="line">    public LRUCache(int maxCapacity) &#123;</span><br><span class="line">        super(maxCapacity, 0.75f, true);</span><br><span class="line">        this.maxCapacity = maxCapacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // é‡å†™removeEldestEntryæ–¹æ³•ï¼Œå½“å¤§å°è¶…è¿‡æœ€å¤§å®¹é‡æ—¶ç§»é™¤æœ€è€çš„é”®å€¼å¯¹</span><br><span class="line">    @Override</span><br><span class="line">    protected boolean removeEldestEntry(Map.Entry&lt;K, V&gt; eldest) &#123;</span><br><span class="line">        return size() &gt; maxCapacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º3çš„LRUç¼“å­˜</span><br><span class="line">        LRUCache&lt;String, Integer&gt; cache = new LRUCache&lt;&gt;(3);</span><br><span class="line"></span><br><span class="line">        // æ’å…¥é”®å€¼å¯¹</span><br><span class="line">        cache.put(&quot;A&quot;, 1);</span><br><span class="line">        cache.put(&quot;B&quot;, 2);</span><br><span class="line">        cache.put(&quot;C&quot;, 3);</span><br><span class="line"></span><br><span class="line">        // è®¿é—®é”®&quot;A&quot;ï¼ˆä½¿å…¶æˆä¸ºæœ€è¿‘ä½¿ç”¨çš„ï¼‰</span><br><span class="line">        cache.get(&quot;A&quot;);</span><br><span class="line"></span><br><span class="line">        // æ’å…¥æ–°é”®å€¼å¯¹&quot;D&quot;ï¼Œå¯¼è‡´æœ€è€çš„é”®å€¼å¯¹&quot;B&quot;è¢«ç§»é™¤</span><br><span class="line">        cache.put(&quot;D&quot;, 4);</span><br><span class="line"></span><br><span class="line">        // æ‰“å°ç¼“å­˜å†…å®¹</span><br><span class="line">        System.out.println(cache); // è¾“å‡º: &#123;C=3, A=1, D=4&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h2><p><strong>æ„é€ æ–¹æ³•</strong>ï¼šLRUCacheæ„é€ æ–¹æ³•ä¸­è°ƒç”¨äº†LinkedHashMapçš„æ„é€ æ–¹æ³•ï¼Œå¹¶å°†accessOrderå‚æ•°è®¾ç½®ä¸ºtrueï¼Œä»¥ä¾¿æŒ‰ç…§è®¿é—®é¡ºåºç»´æŠ¤é”®å€¼å¯¹çš„é¡ºåºã€‚</p>
<p><strong>removeEldestEntry æ–¹æ³•</strong>ï¼šé‡å†™äº†removeEldestEntryæ–¹æ³•ï¼Œå½“ç¼“å­˜çš„å¤§å°è¶…è¿‡maxCapacityæ—¶è¿”å›trueï¼Œä»è€Œç§»é™¤æœ€è€çš„é”®å€¼å¯¹ã€‚</p>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼šåœ¨ä¸»æ–¹æ³•ä¸­åˆ›å»ºäº†ä¸€ä¸ªLRUCacheå®ä¾‹ï¼Œæ’å…¥äº†å‡ ä¸ªé”®å€¼å¯¹ï¼Œå¹¶é€šè¿‡è®¿é—®é”® â€œAâ€ æ¥æ”¹å˜å…¶é¡ºåºã€‚ç„¶åæ’å…¥ä¸€ä¸ªæ–°é”®å€¼å¯¹ â€œDâ€ï¼Œå¯¼è‡´æœ€è€çš„é”®å€¼å¯¹ â€œBâ€ è¢«ç§»é™¤ã€‚</p>
<blockquote>
<p>&#x2F;rv2p9mfn43gmr2qn&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/linkedhashmap%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%9C%89%E5%BA%8F%E6%80%A7%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/linkedhashmap%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%9C%89%E5%BA%8F%E6%80%A7%EF%BC%9F/" itemprop="url">linkedhashmapå¦‚ä½•ä¿è¯æœ‰åºæ€§</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘Œlinkedhashmapå¦‚ä½•ä¿è¯æœ‰åºæ€§ï¼Ÿ"><a href="#ğŸ‘Œlinkedhashmapå¦‚ä½•ä¿è¯æœ‰åºæ€§ï¼Ÿ" class="headerlink" title="ğŸ‘Œlinkedhashmapå¦‚ä½•ä¿è¯æœ‰åºæ€§ï¼Ÿ"></a>ğŸ‘Œlinkedhashmapå¦‚ä½•ä¿è¯æœ‰åºæ€§ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>LinkedHashMapé€šè¿‡ç»´æŠ¤ä¸€ä¸ªåŒå‘é“¾è¡¨æ¥ä¿è¯æœ‰åºæ€§ã€‚è¿™ä¸ªåŒå‘é“¾è¡¨è®°å½•äº†æ‰€æœ‰æ’å…¥çš„é”®å€¼å¯¹çš„é¡ºåºã€‚æ ¹æ®æ„é€ æ–¹æ³•ä¸­çš„å‚æ•°è®¾ç½®ï¼ŒLinkedHashMapå¯ä»¥æŒ‰æ’å…¥é¡ºåºæˆ–è®¿é—®é¡ºåºæ¥ç»´æŠ¤è¿™äº›é”®å€¼å¯¹çš„é¡ºåºã€‚</p>
<h2 id="å…·ä½“å®ç°åŸç†"><a href="#å…·ä½“å®ç°åŸç†" class="headerlink" title="å…·ä½“å®ç°åŸç†"></a>å…·ä½“å®ç°åŸç†</h2><ol>
<li><strong>åŒå‘é“¾è¡¨</strong>ï¼šLinkedHashMapåœ¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚æ¯ä¸ªèŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªé”®å€¼å¯¹ï¼Œå¹¶ä¸”åŒ…å«æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹å’Œåä¸€ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨ã€‚é€šè¿‡è¿™ä¸ªé“¾è¡¨ï¼ŒLinkedHashMapå¯ä»¥å¿«é€Ÿåœ°éå†æ‰€æœ‰é”®å€¼å¯¹ï¼Œä¿æŒå…¶æœ‰åºæ€§ã€‚</li>
<li><strong>æ’å…¥é¡ºåº</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒLinkedHashMapæŒ‰ç…§é”®å€¼å¯¹æ’å…¥çš„é¡ºåºæ¥ç»´æŠ¤é¡ºåºã€‚æ¯æ¬¡æ’å…¥æ–°é”®å€¼å¯¹æ—¶ï¼Œå®ƒä¼šå°†æ–°èŠ‚ç‚¹æ·»åŠ åˆ°é“¾è¡¨çš„æœ«å°¾ã€‚</li>
<li><strong>è®¿é—®é¡ºåº</strong>ï¼šå¦‚æœåœ¨æ„é€ æ–¹æ³•ä¸­å°†accessOrderå‚æ•°è®¾ç½®ä¸ºtrueï¼ŒLinkedHashMapå°†æŒ‰ç…§è®¿é—®é¡ºåºæ¥ç»´æŠ¤é”®å€¼å¯¹çš„é¡ºåºã€‚æ¯æ¬¡è®¿é—®ï¼ˆgetæˆ–putæ“ä½œï¼‰ä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼Œå®ƒä¼šå°†å¯¹åº”çš„èŠ‚ç‚¹ç§»åŠ¨åˆ°é“¾è¡¨çš„æœ«å°¾ã€‚</li>
</ol>
<h2 id="ä»£ç -Demo"><a href="#ä»£ç -Demo" class="headerlink" title="ä»£ç  Demo"></a>ä»£ç  Demo</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import java.util.LinkedHashMap;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">public class LinkedHashMapOrderExample &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // æ’å…¥é¡ºåº</span><br><span class="line">        LinkedHashMap&lt;String, Integer&gt; insertionOrderMap = new LinkedHashMap&lt;&gt;();</span><br><span class="line">        insertionOrderMap.put(&quot;A&quot;, 1);</span><br><span class="line">        insertionOrderMap.put(&quot;B&quot;, 2);</span><br><span class="line">        insertionOrderMap.put(&quot;C&quot;, 3);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;æ’å…¥é¡ºåº:&quot;);</span><br><span class="line">        for (Map.Entry&lt;String, Integer&gt; entry : insertionOrderMap.entrySet()) &#123;</span><br><span class="line">            System.out.println(entry.getKey() + &quot;: &quot; + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // è®¿é—®é¡ºåº</span><br><span class="line">        LinkedHashMap&lt;String, Integer&gt; accessOrderMap = new LinkedHashMap&lt;&gt;(16, 0.75f, true);</span><br><span class="line">        accessOrderMap.put(&quot;A&quot;, 1);</span><br><span class="line">        accessOrderMap.put(&quot;B&quot;, 2);</span><br><span class="line">        accessOrderMap.put(&quot;C&quot;, 3);</span><br><span class="line"></span><br><span class="line">        // è®¿é—®æŸäº›å…ƒç´ </span><br><span class="line">        accessOrderMap.get(&quot;A&quot;);</span><br><span class="line">        accessOrderMap.get(&quot;C&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;è®¿é—®é¡ºåº:&quot;);</span><br><span class="line">        for (Map.Entry&lt;String, Integer&gt; entry : accessOrderMap.entrySet()) &#123;</span><br><span class="line">            System.out.println(entry.getKey() + &quot;: &quot; + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h3><p><strong>æ’å…¥é¡ºåº</strong>ï¼š</p>
<p>åˆ›å»ºä¸€ä¸ªLinkedHashMapå®ä¾‹insertionOrderMapã€‚</p>
<p>æ’å…¥é”®å€¼å¯¹ â€œAâ€ã€â€Bâ€ å’Œ â€œCâ€ã€‚</p>
<p>éå†å¹¶æ‰“å°é”®å€¼å¯¹ï¼Œé¡ºåºä¸æ’å…¥é¡ºåºä¸€è‡´ã€‚</p>
<p><strong>è®¿é—®é¡ºåº</strong>ï¼š</p>
<p>åˆ›å»ºä¸€ä¸ªLinkedHashMapå®ä¾‹accessOrderMapï¼Œå¹¶å°†accessOrderå‚æ•°è®¾ç½®ä¸ºtrueã€‚</p>
<p>æ’å…¥é”®å€¼å¯¹ â€œAâ€ã€â€Bâ€ å’Œ â€œCâ€ã€‚</p>
<p>è®¿é—®é”® â€œAâ€ å’Œ â€œCâ€ï¼ˆé€šè¿‡getæ“ä½œï¼‰ã€‚</p>
<p>éå†å¹¶æ‰“å°é”®å€¼å¯¹ï¼Œé¡ºåºæŒ‰ç…§æœ€è¿‘è®¿é—®çš„é¡ºåºæ’åˆ—ã€‚</p>
<h2 id="å†…éƒ¨æœºåˆ¶"><a href="#å†…éƒ¨æœºåˆ¶" class="headerlink" title="å†…éƒ¨æœºåˆ¶"></a>å†…éƒ¨æœºåˆ¶</h2><p><strong>èŠ‚ç‚¹ç»“æ„</strong>ï¼šLinkedHashMapçš„æ¯ä¸ªèŠ‚ç‚¹ä¸ä»…åŒ…å«é”®å’Œå€¼ï¼Œè¿˜åŒ…å«æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹å’Œåä¸€ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨ã€‚è¿™ä½¿å¾—å®ƒå¯ä»¥é«˜æ•ˆåœ°ç»´æŠ¤é¡ºåºã€‚</p>
<p><strong>æ“ä½œè°ƒæ•´</strong>ï¼šåœ¨æ¯æ¬¡æ’å…¥æˆ–è®¿é—®é”®å€¼å¯¹æ—¶ï¼ŒLinkedHashMapä¼šè°ƒæ•´é“¾è¡¨ä¸­èŠ‚ç‚¹çš„ä½ç½®ï¼Œä»¥ç¡®ä¿é¡ºåºçš„æ­£ç¡®æ€§ã€‚ä¾‹å¦‚ï¼Œåœ¨è®¿é—®é¡ºåºæ¨¡å¼ä¸‹ï¼Œæ¯æ¬¡è®¿é—®ä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼Œå®ƒä¼šå°†å¯¹åº”çš„èŠ‚ç‚¹ç§»åŠ¨åˆ°é“¾è¡¨çš„æœ«å°¾ã€‚</p>
<p>é€šè¿‡è¿™äº›æœºåˆ¶ï¼ŒLinkedHashMapèƒ½å¤Ÿé«˜æ•ˆåœ°ç»´æŠ¤é”®å€¼å¯¹çš„æœ‰åºæ€§ï¼Œæ— è®ºæ˜¯æŒ‰æ’å…¥é¡ºåºè¿˜æ˜¯è®¿é—®é¡ºåºã€‚</p>
<blockquote>
<p>&#x2F;sgl9ep03rn5cwda1&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/%E4%B8%BA%E4%BB%80%E4%B9%88String,Interger%E8%BF%99%E6%A0%B7%E7%9A%84wrapper%E7%B1%BB%E9%80%82%E5%90%88%E4%BD%9C%E4%B8%BA%E9%94%AE%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/%E4%B8%BA%E4%BB%80%E4%B9%88String,Interger%E8%BF%99%E6%A0%B7%E7%9A%84wrapper%E7%B1%BB%E9%80%82%E5%90%88%E4%BD%9C%E4%B8%BA%E9%94%AE%EF%BC%9F/" itemprop="url">ä¸ºä»€ä¹ˆString, Intergerè¿™æ ·çš„wrapperç±»é€‚åˆä½œä¸ºé”®</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘Œä¸ºä»€ä¹ˆString-Intergerè¿™æ ·çš„wrapperç±»é€‚åˆä½œä¸ºé”®ï¼Ÿ"><a href="#ğŸ‘Œä¸ºä»€ä¹ˆString-Intergerè¿™æ ·çš„wrapperç±»é€‚åˆä½œä¸ºé”®ï¼Ÿ" class="headerlink" title="ğŸ‘Œä¸ºä»€ä¹ˆString, Intergerè¿™æ ·çš„wrapperç±»é€‚åˆä½œä¸ºé”®ï¼Ÿ"></a>ğŸ‘Œä¸ºä»€ä¹ˆString, Intergerè¿™æ ·çš„wrapperç±»é€‚åˆä½œä¸ºé”®ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><h2 id="ä¸å¯å˜æ€§"><a href="#ä¸å¯å˜æ€§" class="headerlink" title="ä¸å¯å˜æ€§"></a>ä¸å¯å˜æ€§</h2><p>Stringå’ŒIntegerç­‰åŒ…è£…ç±»éƒ½æ˜¯ä¸å¯å˜çš„å¯¹è±¡ã€‚ä¸€æ—¦åˆ›å»ºï¼Œè¿™äº›å¯¹è±¡çš„çŠ¶æ€å°±ä¸èƒ½è¢«æ”¹å˜ã€‚ä¸å¯å˜æ€§æ˜¯ä¸€ä¸ªé‡è¦çš„ç‰¹æ€§ï¼Œå› ä¸ºå®ƒä¿è¯äº†å¯¹è±¡åœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…çš„å“ˆå¸Œç ï¼ˆhash codeï¼‰ä¸ä¼šæ”¹å˜ã€‚</p>
<p>å¦‚æœä¸€ä¸ªå¯¹è±¡åœ¨ä½œä¸ºé”®çš„è¿‡ç¨‹ä¸­å…¶å“ˆå¸Œç å‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£ä¹ˆåœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾è¯¥é”®æ—¶å°†æ— æ³•æ‰¾åˆ°æ­£ç¡®çš„ä½ç½®ï¼Œå¯¼è‡´æ•°æ®ç»“æ„æ— æ³•æ­£å¸¸å·¥ä½œã€‚ä¸å¯å˜å¯¹è±¡é¿å…äº†è¿™ä¸€é—®é¢˜ã€‚</p>
<h2 id="åˆç†çš„hashCode-å®ç°"><a href="#åˆç†çš„hashCode-å®ç°" class="headerlink" title="åˆç†çš„hashCode()å®ç°"></a>åˆç†çš„hashCode()å®ç°</h2><p>Stringå’ŒIntegerç±»éƒ½æä¾›äº†é«˜è´¨é‡çš„hashCode()æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•èƒ½å¤Ÿæœ‰æ•ˆåœ°åˆ†å¸ƒå“ˆå¸Œå€¼ï¼Œå‡å°‘å“ˆå¸Œå†²çªã€‚å…·ä½“æ¥è¯´ï¼š</p>
<p><strong>String</strong>çš„hashCode()æ–¹æ³•æ˜¯åŸºäºå­—ç¬¦ä¸²å†…å®¹è®¡ç®—çš„ï¼Œä½¿ç”¨äº†ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•ã€‚</p>
<p><strong>Integer</strong>çš„hashCode()æ–¹æ³•ç›´æ¥è¿”å›å…¶å†…éƒ¨å­˜å‚¨çš„æ•´æ•°å€¼ã€‚</p>
<h2 id="åˆç†çš„equals-å®ç°"><a href="#åˆç†çš„equals-å®ç°" class="headerlink" title="åˆç†çš„equals()å®ç°"></a>åˆç†çš„equals()å®ç°</h2><p>Stringå’ŒIntegerç±»éƒ½æä¾›äº†æ­£ç¡®ä¸”é«˜æ•ˆçš„equals()æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•èƒ½å¤Ÿå‡†ç¡®åœ°æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ã€‚è¿™å¯¹äºå“ˆå¸Œè¡¨ç­‰æ•°æ®ç»“æ„æ¥è¯´æ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºåœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾é”®æ—¶éœ€è¦ä¾èµ–equals()æ–¹æ³•æ¥åˆ¤æ–­ä¸¤ä¸ªé”®æ˜¯å¦ç›¸ç­‰ã€‚</p>
<h2 id="å†…å­˜æ•ˆç‡"><a href="#å†…å­˜æ•ˆç‡" class="headerlink" title="å†…å­˜æ•ˆç‡"></a>å†…å­˜æ•ˆç‡</h2><p>è™½ç„¶åŒ…è£…ç±»ç›¸å¯¹äºåŸå§‹ç±»å‹æœ‰ä¸€äº›é¢å¤–çš„å†…å­˜å¼€é”€ï¼Œä½†è¿™äº›ç±»é€šå¸¸ç»è¿‡äº†ä¼˜åŒ–ï¼Œèƒ½å¤Ÿåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æä¾›è¶³å¤Ÿçš„æ€§èƒ½å’Œå†…å­˜æ•ˆç‡ã€‚ä¾‹å¦‚ï¼ŒIntegerç±»ä½¿ç”¨äº†å¯¹è±¡æ± æ¥ç¼“å­˜å¸¸ç”¨çš„æ•´æ•°å€¼ï¼ˆ-128 åˆ° 127ï¼‰ï¼Œä»è€Œå‡å°‘äº†å†…å­˜æ¶ˆè€—å’Œå¯¹è±¡åˆ›å»ºçš„å¼€é”€ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/%E4%B8%BA%E4%BB%80%E4%B9%88hashMap%E7%9A%84%E5%AE%B9%E9%87%8F%E6%89%A9%E5%AE%B9%E6%97%B6%E4%B8%80%E5%AE%9A%E6%98%AF2%E7%9A%84%E5%B9%82%E6%AC%A1_/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/%E4%B8%BA%E4%BB%80%E4%B9%88hashMap%E7%9A%84%E5%AE%B9%E9%87%8F%E6%89%A9%E5%AE%B9%E6%97%B6%E4%B8%80%E5%AE%9A%E6%98%AF2%E7%9A%84%E5%B9%82%E6%AC%A1_/" itemprop="url">ä¸ºä»€ä¹ˆhashMapçš„å®¹é‡æ‰©å®¹æ—¶ä¸€å®šæ˜¯2çš„å¹‚æ¬¡</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘Œä¸ºä»€ä¹ˆhashMapçš„å®¹é‡æ‰©å®¹æ—¶ä¸€å®šæ˜¯2çš„å¹‚æ¬¡"><a href="#ğŸ‘Œä¸ºä»€ä¹ˆhashMapçš„å®¹é‡æ‰©å®¹æ—¶ä¸€å®šæ˜¯2çš„å¹‚æ¬¡" class="headerlink" title="ğŸ‘Œä¸ºä»€ä¹ˆhashMapçš„å®¹é‡æ‰©å®¹æ—¶ä¸€å®šæ˜¯2çš„å¹‚æ¬¡?"></a>ğŸ‘Œä¸ºä»€ä¹ˆhashMapçš„å®¹é‡æ‰©å®¹æ—¶ä¸€å®šæ˜¯2çš„å¹‚æ¬¡?</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>åœ¨HashMapä¸­ï¼Œåˆå§‹åŒ–è®¾ç½®é•¿åº¦æ—¶ï¼Œå®¹é‡è‡ªåŠ¨è½¬æˆ 2 çš„å¹‚æ¬¡é•¿åº¦ï¼Œè¿™æ ·è®¾è®¡æœ‰å‡ ä¸ªé‡è¦åŸå› ï¼Œä¸»è¦æ˜¯ä¸ºäº†ä¼˜åŒ–æ€§èƒ½å’Œç®€åŒ–è®¡ç®—ã€‚</p>
<h2 id="é«˜æ•ˆè®¡ç®—ç´¢å¼•"><a href="#é«˜æ•ˆè®¡ç®—ç´¢å¼•" class="headerlink" title="é«˜æ•ˆè®¡ç®—ç´¢å¼•"></a>é«˜æ•ˆè®¡ç®—ç´¢å¼•</h2><p>HashMapä½¿ç”¨å“ˆå¸Œå€¼æ¥ç¡®å®šé”®å€¼å¯¹åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®ã€‚ä¸ºäº†è®¡ç®—æ•°ç»„ç´¢å¼•ï¼ŒHashMapä½¿ç”¨æŒ‰ä½ä¸æ“ä½œä»£æ›¿å–æ¨¡è¿ç®—ã€‚å…·ä½“æ¥è¯´ï¼ŒHashMapé€šè¿‡ä»¥ä¸‹æ–¹å¼è®¡ç®—ç´¢å¼•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int index= (n - 1) &amp; hash;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­næ˜¯å“ˆå¸Œè¡¨æ•°ç»„çš„é•¿åº¦ã€‚å‡è®¾næ˜¯ 2 çš„å¹‚æ¬¡ï¼Œæ¯”å¦‚ 16ï¼ˆ2^4ï¼‰ï¼Œåˆ™n - 1æ˜¯ 15ï¼ˆ1111 äºŒè¿›åˆ¶ï¼‰ã€‚è¿™æ ·ï¼Œ(n - 1) &amp; hashæ“ä½œå¯ä»¥å¿«é€Ÿåœ°å¯¹å“ˆå¸Œå€¼è¿›è¡Œå–æ¨¡è¿ç®—ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨æ€§èƒ½è¾ƒä½çš„å–æ¨¡æ“ä½œ%ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœnæ˜¯ 16ï¼ˆ2^4ï¼‰ï¼š</p>
<ul>
<li>n - 1æ˜¯ 15ï¼ˆ1111 äºŒè¿›åˆ¶ï¼‰</li>
<li>æŒ‰ä½ä¸æ“ä½œ(n - 1) &amp; hashåªä¿ç•™å“ˆå¸Œå€¼çš„ä½ 4 ä½ï¼Œè¿™ç›¸å½“äºå¯¹ 16 å–æ¨¡ã€‚</li>
</ul>
<p>è¿™ç§æ–¹å¼ä¸ä»…è®¡ç®—å¿«é€Ÿï¼Œè€Œä¸”ä»£ç ç®€æ´ã€‚</p>
<h2 id="å‡å°‘å“ˆå¸Œå†²çª"><a href="#å‡å°‘å“ˆå¸Œå†²çª" class="headerlink" title="å‡å°‘å“ˆå¸Œå†²çª"></a>å‡å°‘å“ˆå¸Œå†²çª</h2><p>åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œå“ˆå¸Œå†²çªæ˜¯ä¸€ä¸ªä¸»è¦é—®é¢˜ã€‚å“ˆå¸Œå†²çªå‘ç”Ÿæ—¶ï¼Œä¸åŒçš„é”®è®¡ç®—å‡ºçš„ç´¢å¼•ç›¸åŒï¼Œå¯¼è‡´å®ƒä»¬è¢«å­˜å‚¨åœ¨åŒä¸€ä¸ªæ¡¶ä¸­ã€‚é€šè¿‡å°†å®¹é‡è®¾ç½®ä¸º 2 çš„å¹‚æ¬¡ï¼Œå“ˆå¸Œè¡¨èƒ½å¤Ÿæ›´å‡åŒ€åœ°åˆ†å¸ƒå“ˆå¸Œå€¼ï¼Œå‡å°‘å†²çªã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œå½“å®¹é‡æ˜¯ 2 çš„å¹‚æ¬¡æ—¶ï¼Œå“ˆå¸Œå€¼çš„ä½ä½å’Œé«˜ä½éƒ½èƒ½å‡åŒ€åœ°å½±å“æœ€ç»ˆç´¢å¼•ã€‚è¿™æ˜¯å› ä¸ºæ‰°åŠ¨å‡½æ•°hash &#x3D; h ^ (h &gt;&gt;&gt; 16)å°†é«˜ä½å’Œä½ä½æ··åˆåœ¨ä¸€èµ·ï¼Œä½¿å¾—å“ˆå¸Œå€¼çš„åˆ†å¸ƒæ›´å‡åŒ€ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªHashMapï¼Œå…¶å®¹é‡ä¸º 10ï¼ˆä¸æ˜¯ 2 çš„å¹‚æ¬¡ï¼‰ï¼Œå¹¶ä¸”æˆ‘ä»¬æœ‰ä¸€ç»„é”®ï¼Œå®ƒä»¬çš„å“ˆå¸Œå€¼åˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li>é”® A çš„å“ˆå¸Œå€¼ï¼š35</li>
<li>é”® B çš„å“ˆå¸Œå€¼ï¼š45</li>
<li>é”® C çš„å“ˆå¸Œå€¼ï¼š55</li>
</ul>
<p>ï¼ˆ1ï¼‰ä½¿ç”¨é 2 çš„å¹‚æ¬¡å®¹é‡</p>
<p>å¦‚æœå®¹é‡ä¸º 10ï¼Œæˆ‘ä»¬è®¡ç®—ç´¢å¼•çš„æ–¹æ³•æ˜¯å–æ¨¡è¿ç®—ï¼š</p>
<ul>
<li>é”® A çš„ç´¢å¼•ï¼š35 % 10 &#x3D; 5</li>
<li>é”® B çš„ç´¢å¼•ï¼š45 % 10 &#x3D; 5</li>
<li>é”® C çš„ç´¢å¼•ï¼š55 % 10 &#x3D; 5</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›ä¸åŒçš„é”®åœ¨å–æ¨¡è¿ç®—åéƒ½æ˜ å°„åˆ°åŒä¸€ä¸ªç´¢å¼• 5ï¼Œå¯¼è‡´äº†å“ˆå¸Œå†²çªã€‚</p>
<p>ï¼ˆ2ï¼‰ä½¿ç”¨ 2 çš„å¹‚æ¬¡å®¹é‡</p>
<p>ç°åœ¨å‡è®¾æˆ‘ä»¬å°†å®¹é‡è®¾ç½®ä¸º 16ï¼ˆ2^4ï¼‰ï¼Œå¹¶ä½¿ç”¨æŒ‰ä½ä¸æ“ä½œæ¥è®¡ç®—ç´¢å¼•ï¼š</p>
<ul>
<li>é”® A çš„ç´¢å¼•ï¼š35 &amp; (16 - 1) &#x3D; 35 &amp; 15 &#x3D; 3</li>
<li>é”® B çš„ç´¢å¼•ï¼š45 &amp; (16 - 1) &#x3D; 45 &amp; 15 &#x3D; 13</li>
<li>é”® C çš„ç´¢å¼•ï¼š55 &amp; (16 - 1) &#x3D; 55 &amp; 15 &#x3D; 7</li>
</ul>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™äº›é”®æ˜ å°„åˆ°ä¸åŒçš„ç´¢å¼•ï¼ˆ3ã€13 å’Œ 7ï¼‰ï¼Œæ²¡æœ‰å‘ç”Ÿå“ˆå¸Œå†²çªã€‚</p>
<h2 id="ç®€åŒ–æ‰©å®¹"><a href="#ç®€åŒ–æ‰©å®¹" class="headerlink" title="ç®€åŒ–æ‰©å®¹"></a>ç®€åŒ–æ‰©å®¹</h2><p>HashMapåœ¨éœ€è¦æ‰©å®¹æ—¶ï¼Œé€šå¸¸ä¼šå°†å®¹é‡åŠ å€ã€‚å¦‚æœå®¹é‡æ€»æ˜¯ 2 çš„å¹‚æ¬¡ï¼Œé‚£ä¹ˆåŠ å€åçš„å®¹é‡ä»ç„¶æ˜¯ 2 çš„å¹‚æ¬¡ï¼Œè¿™æ ·å¯ä»¥ç®€åŒ–æ‰©å®¹è¿‡ç¨‹ä¸­çš„è®¡ç®—å’Œé‡æ–°å“ˆå¸Œæ“ä½œã€‚</p>
<h2 id="å†…å­˜å¯¹é½å’Œæ•ˆç‡"><a href="#å†…å­˜å¯¹é½å’Œæ•ˆç‡" class="headerlink" title="å†…å­˜å¯¹é½å’Œæ•ˆç‡"></a>å†…å­˜å¯¹é½å’Œæ•ˆç‡</h2><p>è®¡ç®—æœºå†…å­˜åˆ†é…é€šå¸¸æ›´é«˜æ•ˆåœ°å¤„ç† 2 çš„å¹‚æ¬¡å¤§å°çš„å†…å­˜å—ã€‚ä½¿ç”¨ 2 çš„å¹‚æ¬¡é•¿åº¦å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨å†…å­˜å¯¹é½ï¼Œæé«˜å†…å­˜è®¿é—®æ•ˆç‡ã€‚</p>
<h2 id="å®ç°ç»†èŠ‚"><a href="#å®ç°ç»†èŠ‚" class="headerlink" title="å®ç°ç»†èŠ‚"></a>å®ç°ç»†èŠ‚</h2><p>å½“ä½ åˆå§‹åŒ–HashMapæ—¶ï¼ŒæŒ‡å®šçš„åˆå§‹å®¹é‡ä¼šè¢«è°ƒæ•´ä¸ºå¤§äºæˆ–ç­‰äºè¯¥å€¼çš„æœ€å°çš„ 2 çš„å¹‚æ¬¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æŒ‡å®šçš„åˆå§‹å®¹é‡æ˜¯ 10ï¼ŒHashMapä¼šå°†å…¶è°ƒæ•´ä¸º 16ï¼ˆ2^4ï¼‰ã€‚</p>
<p>å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">static final int tableSizeFor(int cap) &#123;</span><br><span class="line">    int n = cap - 1;</span><br><span class="line">    n |= n &gt;&gt;&gt; 1;</span><br><span class="line">    n |= n &gt;&gt;&gt; 2;</span><br><span class="line">    n |= n &gt;&gt;&gt; 4;</span><br><span class="line">    n |= n &gt;&gt;&gt; 8;</span><br><span class="line">    n |= n &gt;&gt;&gt; 16;</span><br><span class="line">    return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ–¹æ³•é€šè¿‡ä¸€ç³»åˆ—çš„ä½ç§»å’ŒæŒ‰ä½æˆ–æ“ä½œï¼Œå°†ä»»æ„æ•´æ•°è°ƒæ•´ä¸ºå¤§äºæˆ–ç­‰äºå®ƒçš„æœ€å° 2 çš„å¹‚æ¬¡ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µå¥—ç”¨ä»¥ä¸Šå…¬å¼ä¸è¡Œï¼Œè¿™äº›æ•°å­—å°±æ˜¯2çš„å¹‚è‡ªèº«ã€‚å¦‚æœæ•°å­—4 å¥—ç”¨å…¬å¼çš„è¯ã€‚å¾—åˆ°çš„ä¼šæ˜¯ 8 ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJDKçš„å·¥ç¨‹å¸ˆæŠŠæ‰€æœ‰ç”¨æˆ·ä¼ è¿›æ¥çš„æ•°åœ¨è¿›è¡Œè®¡ç®—ä¹‹å‰å…ˆ-1ã€‚</p>
<blockquote>
<p>&#x2F;yfxseowdd8g5hm0e&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/%E4%B8%BA%E4%BB%80%E4%B9%88hashmap%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BC%9A%E8%BF%9B%E5%85%A5%E6%AD%BB%E5%BE%AA%E7%8E%AF%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/%E4%B8%BA%E4%BB%80%E4%B9%88hashmap%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BC%9A%E8%BF%9B%E5%85%A5%E6%AD%BB%E5%BE%AA%E7%8E%AF%EF%BC%9F/" itemprop="url">ä¸ºä»€ä¹ˆhashmapå¤šçº¿ç¨‹ä¼šè¿›å…¥æ­»å¾ªç¯ï¼Ÿ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘Œä¸ºä»€ä¹ˆhashmapå¤šçº¿ç¨‹ä¼šè¿›å…¥æ­»å¾ªç¯ï¼Ÿ"><a href="#ğŸ‘Œä¸ºä»€ä¹ˆhashmapå¤šçº¿ç¨‹ä¼šè¿›å…¥æ­»å¾ªç¯ï¼Ÿ" class="headerlink" title="ğŸ‘Œä¸ºä»€ä¹ˆhashmapå¤šçº¿ç¨‹ä¼šè¿›å…¥æ­»å¾ªç¯ï¼Ÿ"></a>ğŸ‘Œä¸ºä»€ä¹ˆhashmapå¤šçº¿ç¨‹ä¼šè¿›å…¥æ­»å¾ªç¯ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>HashMapåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å¯èƒ½ä¼šè¿›å…¥æ­»å¾ªç¯ï¼Œä¸»è¦æ˜¯ç”±äºå…¶éçº¿ç¨‹å®‰å…¨çš„è®¾è®¡å¯¼è‡´çš„ã€‚</p>
<h2 id="å¹¶å‘ä¿®æ”¹å¯¼è‡´çš„é“¾è¡¨ç¯"><a href="#å¹¶å‘ä¿®æ”¹å¯¼è‡´çš„é“¾è¡¨ç¯" class="headerlink" title="å¹¶å‘ä¿®æ”¹å¯¼è‡´çš„é“¾è¡¨ç¯"></a>å¹¶å‘ä¿®æ”¹å¯¼è‡´çš„é“¾è¡¨ç¯</h2><p>åœ¨HashMapä¸­ï¼Œå½“å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ï¼Œä½¿ç”¨é“¾åœ°å€æ³•ï¼ˆé“¾è¡¨ï¼‰æ¥å­˜å‚¨å†²çªçš„é”®å€¼å¯¹ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹HashMapè¿›è¡Œä¿®æ”¹ï¼ˆä¾‹å¦‚æ’å…¥æˆ–åˆ é™¤æ“ä½œï¼‰ï¼Œå¯èƒ½ä¼šå¯¼è‡´é“¾è¡¨ç»“æ„è¢«ç ´åï¼Œå½¢æˆç¯å½¢é“¾è¡¨ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå½“éå†é“¾è¡¨æ—¶ï¼Œä¼šé™·å…¥æ­»å¾ªç¯ã€‚</p>
<h4 id="åŸå› åˆ†æ"><a href="#åŸå› åˆ†æ" class="headerlink" title="åŸå› åˆ†æ"></a>åŸå› åˆ†æ</h4><p>å½“ä¸¤ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹HashMapï¼Œä¾‹å¦‚åœ¨åŒä¸€ä¸ªæ¡¶ä¸­æ’å…¥å…ƒç´ ï¼Œå¯èƒ½ä¼šå¯¼è‡´é“¾è¡¨çš„æŒ‡é’ˆè¢«é”™è¯¯åœ°æ›´æ–°ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªçº¿ç¨‹æ­£åœ¨å°†ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹æ’å…¥é“¾è¡¨ä¸­ï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨é‡æ–°æ’åˆ—é“¾è¡¨çš„é¡ºåºã€‚è¿™ç§ç«äº‰æ¡ä»¶å¯èƒ½å¯¼è‡´é“¾è¡¨ä¸­å‡ºç°ç¯å½¢ç»“æ„ã€‚</p>
<h4 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">public class HashMapInfiniteLoop &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        final Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        // åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ HashMap è¿›è¡Œæ’å…¥æ“ä½œ</span><br><span class="line">        Thread t1 = new Thread(() -&gt; &#123;</span><br><span class="line">            for (int i = 0; i &lt; 10000; i++) &#123;</span><br><span class="line">                map.put(i, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread t2 = new Thread(() -&gt; &#123;</span><br><span class="line">            for (int i = 10000; i &lt; 20000; i++) &#123;</span><br><span class="line">                map.put(i, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            t1.join();</span><br><span class="line">            t2.join();</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // éå† HashMapï¼Œå¯èƒ½ä¼šé™·å…¥æ­»å¾ªç¯</span><br><span class="line">        for (Map.Entry&lt;Integer, Integer&gt; entry : map.entrySet()) &#123;</span><br><span class="line">            System.out.println(entry.getKey() + &quot; : &quot; + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹HashMapè¿›è¡Œæ’å…¥æ“ä½œï¼Œå¯èƒ½ä¼šå¯¼è‡´é“¾è¡¨ç»“æ„è¢«ç ´åï¼Œå½¢æˆç¯å½¢é“¾è¡¨ï¼Œä»è€Œåœ¨éå†æ—¶é™·å…¥æ­»å¾ªç¯ã€‚</p>
<h2 id="æ‰©å®¹å¯¼è‡´çš„å¹¶å‘é—®é¢˜"><a href="#æ‰©å®¹å¯¼è‡´çš„å¹¶å‘é—®é¢˜" class="headerlink" title="æ‰©å®¹å¯¼è‡´çš„å¹¶å‘é—®é¢˜"></a>æ‰©å®¹å¯¼è‡´çš„å¹¶å‘é—®é¢˜</h2><p>HashMapåœ¨å®¹é‡è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶ä¼šè¿›è¡Œæ‰©å®¹ï¼ˆrehashï¼‰ï¼Œå³é‡æ–°åˆ†é…æ¡¶æ•°ç»„ï¼Œå¹¶é‡æ–°å“ˆå¸Œæ‰€æœ‰é”®å€¼å¯¹ã€‚å¦‚æœåœ¨æ‰©å®¹è¿‡ç¨‹ä¸­ï¼Œæœ‰å…¶ä»–çº¿ç¨‹åŒæ—¶è¿›è¡Œæ’å…¥æ“ä½œï¼Œå¯èƒ½ä¼šå¯¼è‡´é‡æ–°å“ˆå¸Œè¿‡ç¨‹ä¸­çš„æ•°æ®ä¸ä¸€è‡´ï¼Œè¿›è€Œå¼•å‘æ­»å¾ªç¯ã€‚</p>
<h4 id="åŸå› åˆ†æ-1"><a href="#åŸå› åˆ†æ-1" class="headerlink" title="åŸå› åˆ†æ"></a>åŸå› åˆ†æ</h4><p>æ‰©å®¹è¿‡ç¨‹ä¸­ï¼ŒHashMapä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ã€æ›´å¤§çš„æ¡¶æ•°ç»„ï¼Œå¹¶å°†æ‰€æœ‰æ—§çš„é”®å€¼å¯¹é‡æ–°å“ˆå¸Œå¹¶æ”¾å…¥æ–°çš„æ¡¶ä¸­ã€‚å¦‚æœåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æœ‰å…¶ä»–çº¿ç¨‹æ’å…¥æ–°çš„é”®å€¼å¯¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ—§æ¡¶å’Œæ–°æ¡¶çš„æ•°æ®ç»“æ„ä¸ä¸€è‡´ï¼Œè¿›è€Œå¼•èµ·æ­»å¾ªç¯ã€‚</p>
<h4 id="ç¤ºä¾‹ä»£ç -1"><a href="#ç¤ºä¾‹ä»£ç -1" class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">public class HashMapResizeInfiniteLoop &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        final Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(2);</span><br><span class="line"></span><br><span class="line">        // åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ HashMap è¿›è¡Œæ’å…¥æ“ä½œ</span><br><span class="line">        Thread t1 = new Thread(() -&gt; &#123;</span><br><span class="line">            for (int i = 0; i &lt; 10000; i++) &#123;</span><br><span class="line">                map.put(i, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread t2 = new Thread(() -&gt; &#123;</span><br><span class="line">            for (int i = 10000; i &lt; 20000; i++) &#123;</span><br><span class="line">                map.put(i, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            t1.join();</span><br><span class="line">            t2.join();</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // éå† HashMapï¼Œå¯èƒ½ä¼šé™·å…¥æ­»å¾ªç¯</span><br><span class="line">        for (Map.Entry&lt;Integer, Integer&gt; entry : map.entrySet()) &#123;</span><br><span class="line">            System.out.println(entry.getKey() + &quot; : &quot; + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒHashMapåˆå§‹å®¹é‡è®¾ç½®ä¸º 2ï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ’å…¥å¤§é‡å…ƒç´ ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ‰©å®¹è¿‡ç¨‹ä¸­æ•°æ®ä¸ä¸€è‡´ï¼Œä»è€Œå¼•å‘æ­»å¾ªç¯ã€‚</p>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„"><a href="#ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„" class="headerlink" title="ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„"></a>ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„</h3><p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œä½¿ç”¨ConcurrentHashMapä»£æ›¿HashMapã€‚ConcurrentHashMapé€šè¿‡åˆ†æ®µé”æœºåˆ¶æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå¹¶å‘æ€§èƒ½æ›´å¥½ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import java.util.concurrent.ConcurrentHashMap;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">public class ConcurrentHashMapExample &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        final Map&lt;Integer, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        Thread t1 = new Thread(() -&gt; &#123;</span><br><span class="line">            for (int i = 0; i &lt; 10000; i++) &#123;</span><br><span class="line">                map.put(i, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread t2 = new Thread(() -&gt; &#123;</span><br><span class="line">            for (int i = 10000; i &lt; 20000; i++) &#123;</span><br><span class="line">                map.put(i, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            t1.join();</span><br><span class="line">            t2.join();</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        for (Map.Entry&lt;Integer, Integer&gt; entry : map.entrySet()) &#123;</span><br><span class="line">            System.out.println(entry.getKey() + &quot; : &quot; + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¤–éƒ¨åŒæ­¥"><a href="#å¤–éƒ¨åŒæ­¥" class="headerlink" title="å¤–éƒ¨åŒæ­¥"></a>å¤–éƒ¨åŒæ­¥</h3><p>å¦‚æœå¿…é¡»ä½¿ç”¨HashMapï¼Œå¯ä»¥åœ¨å¤–éƒ¨è¿›è¡ŒåŒæ­¥ï¼Œç¡®ä¿åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹HashMapè¿›è¡Œä¿®æ”¹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">public class SynchronizedHashMapExample &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        final Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        Thread t1 = new Thread(() -&gt; &#123;</span><br><span class="line">            synchronized (map) &#123;</span><br><span class="line">                for (int i = 0; i &lt; 10000; i++) &#123;</span><br><span class="line">                    map.put(i, i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread t2 = new Thread(() -&gt; &#123;</span><br><span class="line">            synchronized (map) &#123;</span><br><span class="line">                for (int i = 10000; i &lt; 20000; i++) &#123;</span><br><span class="line">                    map.put(i, i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            t1.join();</span><br><span class="line">            t2.join();</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        synchronized (map) &#123;</span><br><span class="line">            for (Map.Entry&lt;Integer, Integer&gt; entry : map.entrySet()) &#123;</span><br><span class="line">                System.out.println(entry.getKey() + &quot; : &quot; + entry.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä½¿ç”¨ConcurrentHashMapæˆ–å¤–éƒ¨åŒæ­¥ï¼Œå¯ä»¥é¿å…HashMapåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å‡ºç°æ­»å¾ªç¯çš„é—®é¢˜ã€‚</p>
<blockquote>
<p>&#x2F;dhuaw13mlcgfpa9k&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaoyaofeihu.github.io/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E6%89%B0%E5%8A%A8%E5%87%BD%E6%95%B0%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/11.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä½™å£°-ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/16/%E9%9D%A2%E8%AF%95%E9%A2%98/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E6%89%B0%E5%8A%A8%E5%87%BD%E6%95%B0%EF%BC%9F/" itemprop="url">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ‰°åŠ¨å‡½æ•°ï¼Ÿ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2024-10-16T13:33:41+00:00">
                2024-10-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2025-05-17T09:01:35+00:00">
                2025-05-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ğŸ‘Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ‰°åŠ¨å‡½æ•°ï¼Ÿ"><a href="#ğŸ‘Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ‰°åŠ¨å‡½æ•°ï¼Ÿ" class="headerlink" title="ğŸ‘Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ‰°åŠ¨å‡½æ•°ï¼Ÿ"></a>ğŸ‘Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ‰°åŠ¨å‡½æ•°ï¼Ÿ</h1><h1 id="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"><a href="#é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ" class="headerlink" title="é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ"></a>é¢˜ç›®è¯¦ç»†ç­”æ¡ˆ</h1><p>æ‰°åŠ¨å‡½æ•°çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜å“ˆå¸Œç çš„è´¨é‡ï¼Œä½¿å…¶åœ¨å“ˆå¸Œè¡¨ä¸­æ›´å‡åŒ€åœ°åˆ†å¸ƒã€‚å…·ä½“æ¥è¯´ï¼š</p>
<p><strong>å‡å°‘å“ˆå¸Œå†²çª</strong>ï¼šé€šè¿‡å°†é«˜ä½å’Œä½ä½æ··åˆï¼Œæ‰°åŠ¨å‡½æ•°å‡å°‘äº†å“ˆå¸Œç çš„æ¨¡å¼æ€§ï¼Œé™ä½äº†å“ˆå¸Œå†²çªçš„æ¦‚ç‡ã€‚</p>
<p><strong>å‡åŒ€åˆ†å¸ƒ</strong>ï¼šæ‰°åŠ¨åçš„å“ˆå¸Œç æ›´åŠ å‡åŒ€åœ°åˆ†å¸ƒåœ¨å“ˆå¸Œè¡¨çš„æ¡¶ä¸­ï¼Œä»è€Œæé«˜äº†å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚</p>
<h2 id="ç¤ºä¾‹-Demo"><a href="#ç¤ºä¾‹-Demo" class="headerlink" title="ç¤ºä¾‹ Demo"></a>ç¤ºä¾‹ Demo</h2><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªé”®å¯¹è±¡ï¼Œå…¶hashCode()è¿”å›å€¼ä¸º123456ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å…¶å“ˆå¸Œå€¼ï¼š</p>
<ol>
<li>è°ƒç”¨hashCode()æ–¹æ³•ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int h = 123456;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æ‰°åŠ¨å‡½æ•°è®¡ç®—ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int hash = h ^ (h &gt;&gt;&gt; 16);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>å…·ä½“è®¡ç®—æ­¥éª¤ï¼š<ul>
<li>h &gt;&gt;&gt; 16 &#x3D; 123456 &gt;&gt;&gt; 16 &#x3D; 1ï¼ˆå³ç§» 16 ä½ï¼‰</li>
<li>hash &#x3D; 123456 ^ 1 &#x3D; 123457ï¼ˆå¼‚æˆ–è¿ç®—ï¼‰</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆï¼Œå“ˆå¸Œå€¼ä¸º123457ã€‚</p>
<blockquote>
<p>&#x2F;ntmpkg1lprz393fp&gt;</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/10/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/11.jpg"
               alt="" />
          <p class="site-author-name" itemprop="name"></p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">229</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">26</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">javayun</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Gemini
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
